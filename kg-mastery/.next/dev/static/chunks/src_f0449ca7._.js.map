{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/long/irvinehacks/IrvineHacks2026/kg-mastery/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n    return twMerge(clsx(inputs));\n}\n\nexport const API_BASE = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000\";\n\nexport function getStatusFromConfidence(confidence: number) {\n    if (confidence === 0) return { label: \"Unseen\", emoji: \"‚ö´\", color: \"grey\" } as const;\n    if (confidence < 0.4) return { label: \"Struggling\", emoji: \"üî¥\", color: \"red\" } as const;\n    if (confidence < 0.7) return { label: \"Exposed\", emoji: \"üü°\", color: \"gold\" } as const;\n    return { label: \"Mastered\", emoji: \"üü¢\", color: \"cyan\" } as const;\n}\n\nexport function getAuthToken(): string | null {\n    if (typeof window === \"undefined\") return null;\n    return localStorage.getItem(\"nebula_token\");\n}\n\nexport function setAuthToken(token: string) {\n    localStorage.setItem(\"nebula_token\", token);\n}\n\nexport function clearAuthToken() {\n    localStorage.removeItem(\"nebula_token\");\n}\n\nexport async function apiFetch(path: string, options: RequestInit = {}) {\n    const token = getAuthToken();\n    const headers: Record<string, string> = {\n        ...(options.headers as Record<string, string> || {}),\n    };\n    if (token) {\n        headers[\"Authorization\"] = `Bearer ${token}`;\n    }\n    if (!(options.body instanceof FormData)) {\n        headers[\"Content-Type\"] = \"application/json\";\n    }\n\n    const res = await fetch(`${API_BASE}${path}`, {\n        ...options,\n        headers,\n    });\n\n    if (res.status === 401) {\n        clearAuthToken();\n        window.location.href = \"/login\";\n        throw new Error(\"Unauthorized\");\n    }\n\n    return res;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAOwB;AAPxB;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACxB;AAEO,MAAM,WAAW,2KAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI;AAEpD,SAAS,wBAAwB,UAAkB;IACtD,IAAI,eAAe,GAAG,OAAO;QAAE,OAAO;QAAU,OAAO;QAAK,OAAO;IAAO;IAC1E,IAAI,aAAa,KAAK,OAAO;QAAE,OAAO;QAAc,OAAO;QAAM,OAAO;IAAM;IAC9E,IAAI,aAAa,KAAK,OAAO;QAAE,OAAO;QAAW,OAAO;QAAM,OAAO;IAAO;IAC5E,OAAO;QAAE,OAAO;QAAY,OAAO;QAAM,OAAO;IAAO;AAC3D;AAEO,SAAS;IACZ;;IACA,OAAO,aAAa,OAAO,CAAC;AAChC;AAEO,SAAS,aAAa,KAAa;IACtC,aAAa,OAAO,CAAC,gBAAgB;AACzC;AAEO,SAAS;IACZ,aAAa,UAAU,CAAC;AAC5B;AAEO,eAAe,SAAS,IAAY,EAAE,UAAuB,CAAC,CAAC;IAClE,MAAM,QAAQ;IACd,MAAM,UAAkC;QACpC,GAAI,QAAQ,OAAO,IAA8B,CAAC,CAAC;IACvD;IACA,IAAI,OAAO;QACP,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;IAChD;IACA,IAAI,CAAC,CAAC,QAAQ,IAAI,YAAY,QAAQ,GAAG;QACrC,OAAO,CAAC,eAAe,GAAG;IAC9B;IAEA,MAAM,MAAM,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QAC1C,GAAG,OAAO;QACV;IACJ;IAEA,IAAI,IAAI,MAAM,KAAK,KAAK;QACpB;QACA,OAAO,QAAQ,CAAC,IAAI,GAAG;QACvB,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO;AACX"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///Users/long/irvinehacks/IrvineHacks2026/kg-mastery/src/store/nebulaStore.ts"],"sourcesContent":["import { create } from \"zustand\";\nimport type { GraphNode, GraphData, Resource, PollData } from \"@/lib/types\";\nimport { apiFetch } from \"@/lib/utils\";\n\ninterface NebulaState {\n    // Graph\n    graphData: GraphData | null;\n    loading: boolean;\n\n    // Selection\n    selectedNode: GraphNode | null;\n    drawerOpen: boolean;\n\n    // Resources\n    resources: Resource[];\n    resourcesLoading: boolean;\n\n    // Poll\n    poll: PollData | null;\n    pollLoading: boolean;\n    pollModalOpen: boolean;\n\n    // Actions\n    fetchGraph: (courseId: string) => Promise<void>;\n    selectNode: (node: GraphNode | null) => void;\n    closeDrawer: () => void;\n    fetchResources: (conceptId: string) => Promise<void>;\n    generatePoll: (conceptId: string) => Promise<void>;\n    updateMastery: (conceptId: string, evalResult: string) => Promise<void>;\n    updateMasteryDelta: (conceptId: string, delta: number) => Promise<void>;\n    setPollModalOpen: (open: boolean) => void;\n    setGraphData: (data: GraphData) => void;\n}\n\nexport const useNebulaStore = create<NebulaState>((set, get) => ({\n    graphData: null,\n    loading: false,\n    selectedNode: null,\n    drawerOpen: false,\n    resources: [],\n    resourcesLoading: false,\n    poll: null,\n    pollLoading: false,\n    pollModalOpen: false,\n\n    fetchGraph: async (courseId: string) => {\n        set({ loading: true });\n        try {\n            const res = await apiFetch(`/api/courses/${courseId}/graph`);\n            if (res.ok) {\n                const data = await res.json();\n                set({ graphData: data, loading: false });\n            } else {\n                set({ loading: false });\n            }\n        } catch {\n            set({ loading: false });\n        }\n    },\n\n    selectNode: (node: GraphNode | null) => {\n        set({ selectedNode: node, drawerOpen: !!node, resources: [], poll: null });\n        if (node) {\n            get().fetchResources(node.id);\n        }\n    },\n\n    closeDrawer: () => set({ drawerOpen: false, selectedNode: null }),\n\n    fetchResources: async (conceptId: string) => {\n        set({ resourcesLoading: true });\n        try {\n            const res = await apiFetch(`/api/concepts/${conceptId}/resources`);\n            if (res.ok) {\n                const data = await res.json();\n                set({ resources: data, resourcesLoading: false });\n            } else {\n                set({ resourcesLoading: false });\n            }\n        } catch {\n            set({ resourcesLoading: false });\n        }\n    },\n\n    generatePoll: async (conceptId: string) => {\n        set({ pollLoading: true, pollModalOpen: true });\n        try {\n            const res = await apiFetch(`/api/concepts/${conceptId}/poll`, { method: \"POST\" });\n            if (res.ok) {\n                const data = await res.json();\n                set({ poll: data, pollLoading: false });\n            } else {\n                set({ pollLoading: false });\n            }\n        } catch {\n            set({ pollLoading: false });\n        }\n    },\n\n    updateMastery: async (conceptId: string, evalResult: string) => {\n        try {\n            const res = await apiFetch(`/api/mastery/${conceptId}`, {\n                method: \"PUT\",\n                body: JSON.stringify({ eval_result: evalResult }),\n            });\n            if (res.ok) {\n                const data = await res.json();\n                // Update the node confidence in the graph\n                set((state) => {\n                    if (!state.graphData) return {};\n                    const nodes = state.graphData.nodes.map((n) =>\n                        n.id === conceptId ? { ...n, confidence: data.confidence } : n\n                    );\n                    const updatedNode = nodes.find((n) => n.id === conceptId) || null;\n                    return {\n                        graphData: { ...state.graphData, nodes },\n                        selectedNode: state.selectedNode?.id === conceptId ? updatedNode : state.selectedNode,\n                    };\n                });\n            }\n        } catch {\n            // silent fail for MVP\n        }\n    },\n\n    updateMasteryDelta: async (conceptId: string, delta: number) => {\n        try {\n            const res = await apiFetch(`/api/mastery/${conceptId}`, {\n                method: \"PUT\",\n                body: JSON.stringify({ delta }),\n            });\n            if (res.ok) {\n                const data = await res.json();\n                set((state) => {\n                    if (!state.graphData) return {};\n                    const nodes = state.graphData.nodes.map((n) =>\n                        n.id === conceptId ? { ...n, confidence: data.confidence } : n\n                    );\n                    const updatedNode = nodes.find((n) => n.id === conceptId) || null;\n                    return {\n                        graphData: { ...state.graphData, nodes },\n                        selectedNode: state.selectedNode?.id === conceptId ? updatedNode : state.selectedNode,\n                    };\n                });\n            }\n        } catch {\n            // silent fail for MVP\n        }\n    },\n\n    setPollModalOpen: (open: boolean) => set({ pollModalOpen: open }),\n\n    setGraphData: (data: GraphData) => set({ graphData: data }),\n}));\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":["file:///Users/long/irvinehacks/IrvineHacks2026/kg-mastery/src/app/courses/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState, useCallback } from \"react\";\nimport { useParams, useSearchParams, useRouter } from \"next/navigation\";\nimport dynamic from \"next/dynamic\";\nimport { useNebulaStore } from \"@/store/nebulaStore\";\nimport { getAuthToken, apiFetch, getStatusFromConfidence } from \"@/lib/utils\";\nimport type { GraphNode } from \"@/lib/types\";\nimport {\n    Upload,\n    X,\n    Loader2,\n    ExternalLink,\n    Video,\n    FileText,\n    ThumbsUp,\n    ThumbsDown,\n    Eye,\n    ArrowLeft,\n} from \"lucide-react\";\n\n// Dynamic import for react-force-graph-2d (requires window)\nconst ForceGraph2D = dynamic(() => import(\"react-force-graph-2d\"), {\n    ssr: false,\n});\n\n// Canvas drawing helpers\nconst GOLD = \"#C5AE79\";\nconst CYAN = \"#00ffff\";\nconst RED = \"#ff0055\";\nconst GREY = \"rgba(255,255,255,0.25)\";\n\nfunction getNodeColor(confidence: number): string {\n    if (confidence === 0) return GREY;\n    if (confidence < 0.4) return RED;\n    if (confidence < 0.7) return GOLD;\n    return CYAN;\n}\n\nfunction getNodeGlowRadius(confidence: number): number {\n    if (confidence === 0) return 0;\n    if (confidence < 0.4) return 20;\n    if (confidence < 0.7) return 14;\n    return 25;\n}\n\n// Dynamic node radius: ensures the circle is at least large enough to fit the longest word\nconst FONT_WIDTH_ESTIMATE = 6.5; // approx px per char at ~11px bold font\nconst NODE_PADDING = 14;         // px padding inside circle\nconst BASE_RADIUS = 28;          // minimum radius\n\nfunction getNodeRadius(label: string, confidence: number): number {\n    // Find the longest word in the label\n    const longestWord = label.split(/[\\s\\-\\/]+/).reduce(\n        (a, b) => (a.length > b.length ? a : b),\n        \"\"\n    );\n    const minRadiusForWord = (longestWord.length * FONT_WIDTH_ESTIMATE + NODE_PADDING) / 2;\n    const baseForState = confidence === 0 ? BASE_RADIUS * 0.75 : BASE_RADIUS;\n    return Math.max(baseForState, minRadiusForWord);\n}\n\nexport default function CourseGraphPage() {\n    const params = useParams();\n    const searchParams = useSearchParams();\n    const router = useRouter();\n    const courseId = params.id as string;\n    const isDev = searchParams.get(\"dev\") === \"true\";\n\n    const graphRef = useRef<any>(null);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const [uploading, setUploading] = useState(false);\n    const [pulsePhase, setPulsePhase] = useState(0);\n\n    const {\n        graphData,\n        loading,\n        selectedNode,\n        drawerOpen,\n        resources,\n        resourcesLoading,\n        poll,\n        pollLoading,\n        pollModalOpen,\n        fetchGraph,\n        selectNode,\n        closeDrawer,\n        generatePoll,\n        updateMastery,\n        updateMasteryDelta,\n        setPollModalOpen,\n        setGraphData,\n    } = useNebulaStore();\n\n    // Auth guard\n    useEffect(() => {\n        if (!getAuthToken()) {\n            router.replace(\"/login\");\n            return;\n        }\n        fetchGraph(courseId);\n    }, [courseId, router, fetchGraph]);\n\n    // Pulse animation for Exposed (gold) nodes\n    useEffect(() => {\n        const interval = setInterval(() => {\n            setPulsePhase((p) => (p + 0.05) % (Math.PI * 2));\n        }, 50);\n        return () => clearInterval(interval);\n    }, []);\n\n    // PDF Upload\n    const handleUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        if (!file) return;\n        setUploading(true);\n        try {\n            const formData = new FormData();\n            formData.append(\"file\", file);\n            const res = await apiFetch(`/api/courses/${courseId}/upload`, {\n                method: \"POST\",\n                body: formData,\n            });\n            if (res.ok) {\n                const data = await res.json();\n                setGraphData(data);\n            } else {\n                const err = await res.json().catch(() => ({ detail: \"Upload failed\" }));\n                alert(err.detail || \"Upload failed\");\n            }\n        } catch {\n            alert(\"Upload failed\");\n        } finally {\n            setUploading(false);\n            if (fileInputRef.current) fileInputRef.current.value = \"\";\n        }\n    };\n\n    // Node click handler\n    const handleNodeClick = useCallback(\n        (node: any) => {\n            selectNode(node as GraphNode);\n        },\n        [selectNode]\n    );\n\n    // Canvas node rendering\n    const nodeCanvasObject = useCallback(\n        (node: any, ctx: CanvasRenderingContext2D, globalScale: number) => {\n            const confidence = node.confidence ?? 0;\n            const color = getNodeColor(confidence);\n            const glowRadius = getNodeGlowRadius(confidence);\n            const label = node.label || \"\";\n            const isSelected = selectedNode?.id === node.id;\n            const baseRadius = getNodeRadius(label, confidence);\n\n            // Pulsing for Exposed (gold) and Gap (red) nodes\n            let pulse = 1;\n            if (confidence >= 0.4 && confidence < 0.7) {\n                pulse = 1 + 0.06 * Math.sin(pulsePhase);\n            } else if (confidence > 0 && confidence < 0.4) {\n                pulse = 1 + 0.04 * Math.sin(pulsePhase * 1.5);\n            }\n\n            const radius = baseRadius * pulse;\n\n            // Outer glow layer\n            if (glowRadius > 0) {\n                ctx.save();\n                ctx.shadowColor = color;\n                ctx.shadowBlur = glowRadius * (isSelected ? 2.5 : 1);\n                ctx.beginPath();\n                ctx.arc(node.x, node.y, radius, 0, Math.PI * 2);\n                ctx.fillStyle = color;\n                ctx.fill();\n                ctx.restore();\n            }\n\n            // Node circle\n            ctx.beginPath();\n            ctx.arc(node.x, node.y, radius, 0, Math.PI * 2);\n\n            if (confidence === 0) {\n                // Unseen: outlined grey with subtle fill\n                ctx.strokeStyle = \"rgba(255,255,255,0.3)\";\n                ctx.lineWidth = 1.5;\n                ctx.stroke();\n                ctx.fillStyle = \"rgba(10, 10, 10, 0.8)\";\n                ctx.fill();\n            } else {\n                // Darker fill with colored border for readability\n                ctx.fillStyle = \"rgba(10, 10, 10, 0.75)\";\n                ctx.fill();\n                ctx.strokeStyle = color;\n                ctx.lineWidth = 2.5;\n                ctx.stroke();\n            }\n\n            // Selected ring\n            if (isSelected) {\n                ctx.beginPath();\n                ctx.arc(node.x, node.y, radius + 4, 0, Math.PI * 2);\n                ctx.strokeStyle = \"#ffffff\";\n                ctx.lineWidth = 2;\n                ctx.stroke();\n            }\n\n            // Label INSIDE the circle ‚Äî word wrap if needed\n            const fontSize = Math.max(11 / globalScale, 4);\n            ctx.font = `700 ${fontSize}px Inter, system-ui, sans-serif`;\n            ctx.textAlign = \"center\";\n            ctx.textBaseline = \"middle\";\n            ctx.fillStyle = confidence === 0\n                ? \"rgba(255,255,255,0.5)\"\n                : isSelected ? \"#ffffff\" : color;\n\n            // Simple word wrap for labels that are wider than the circle\n            const maxWidth = radius * 1.7;\n            const words = label.split(/\\s+/);\n            const lines: string[] = [];\n            let currentLine = words[0] || \"\";\n\n            for (let i = 1; i < words.length; i++) {\n                const testLine = currentLine + \" \" + words[i];\n                if (ctx.measureText(testLine).width > maxWidth) {\n                    lines.push(currentLine);\n                    currentLine = words[i];\n                } else {\n                    currentLine = testLine;\n                }\n            }\n            lines.push(currentLine);\n\n            const lineHeight = fontSize * 1.25;\n            const startY = node.y - ((lines.length - 1) * lineHeight) / 2;\n            for (let i = 0; i < lines.length; i++) {\n                ctx.fillText(lines[i], node.x, startY + i * lineHeight);\n            }\n        },\n        [selectedNode, pulsePhase]\n    );\n\n    // Pointer area for click detection (matches visual size)\n    const nodePointerAreaPaint = useCallback(\n        (node: any, color: string, ctx: CanvasRenderingContext2D) => {\n            const label = node.label || \"\";\n            const confidence = node.confidence ?? 0;\n            const radius = getNodeRadius(label, confidence);\n            ctx.fillStyle = color;\n            ctx.beginPath();\n            ctx.arc(node.x, node.y, radius, 0, Math.PI * 2);\n            ctx.fill();\n        },\n        []\n    );\n\n    // Custom link rendering\n    const linkCanvasObject = useCallback(\n        (link: any, ctx: CanvasRenderingContext2D) => {\n            const source = link.source;\n            const target = link.target;\n            if (!source || !target || typeof source === \"string\" || typeof target === \"string\") return;\n\n            ctx.beginPath();\n            ctx.moveTo(source.x, source.y);\n            ctx.lineTo(target.x, target.y);\n            ctx.strokeStyle = \"rgba(197, 174, 121, 0.15)\";\n            ctx.lineWidth = 0.8;\n            ctx.stroke();\n        },\n        []\n    );\n\n    const status = selectedNode ? getStatusFromConfidence(selectedNode.confidence) : null;\n\n    const hasGraph = graphData && graphData.nodes.length > 0;\n\n    return (\n        <div className=\"h-screen w-screen flex flex-col bg-[#0a0a0a] overflow-hidden\">\n            {/* Header */}\n            <header className=\"flex items-center gap-4 px-4 py-2.5 border-b border-[#C5AE79]/15 bg-[#0a0a0a]/90 backdrop-blur-md z-50 shrink-0\">\n                <button\n                    onClick={() => router.push(\"/courses\")}\n                    className=\"text-[#C5AE79]/50 hover:text-[#C5AE79] transition-colors\"\n                >\n                    <ArrowLeft className=\"w-4 h-4\" />\n                </button>\n                <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs font-bold tracking-wider text-[#C5AE79]/80\">\n                        NEBULA\n                    </span>\n                    <span className=\"text-[#C5AE79]/20\">|</span>\n                    <span className=\"text-sm font-semibold text-[#C5AE79] truncate max-w-[300px]\">\n                        {graphData?.course?.name || \"Loading...\"}\n                    </span>\n                </div>\n\n                <div className=\"ml-auto flex items-center gap-2\">\n                    <input\n                        type=\"file\"\n                        accept=\"application/pdf\"\n                        className=\"hidden\"\n                        ref={fileInputRef}\n                        onChange={handleUpload}\n                    />\n                    <button\n                        onClick={() => fileInputRef.current?.click()}\n                        disabled={uploading}\n                        className=\"flex items-center gap-1.5 h-8 px-3 text-xs font-medium bg-[#C5AE79]/10 border border-[#C5AE79]/30 text-[#C5AE79] rounded-lg hover:bg-[#C5AE79]/20 transition-all disabled:opacity-50\"\n                    >\n                        {uploading ? (\n                            <Loader2 className=\"w-3.5 h-3.5 animate-spin\" />\n                        ) : (\n                            <Upload className=\"w-3.5 h-3.5\" />\n                        )}\n                        {uploading ? \"Analyzing...\" : \"Upload PDF\"}\n                    </button>\n                </div>\n            </header>\n\n            {/* Main Content */}\n            <div className=\"flex-1 relative min-h-0\">\n                {loading ? (\n                    <div className=\"h-full flex items-center justify-center\">\n                        <Loader2 className=\"w-6 h-6 animate-spin text-[#C5AE79]\" />\n                    </div>\n                ) : !hasGraph ? (\n                    <div className=\"h-full flex flex-col items-center justify-center text-center p-6\">\n                        <div className=\"w-16 h-16 rounded-2xl bg-[#C5AE79]/10 flex items-center justify-center mb-4\">\n                            <Upload className=\"w-8 h-8 text-[#C5AE79]/50\" />\n                        </div>\n                        <h2 className=\"text-lg font-semibold text-[#C5AE79] mb-1\">\n                            Upload Course Material\n                        </h2>\n                        <p className=\"text-xs text-[#C5AE79]/50 max-w-sm mb-4\">\n                            Upload a PDF (syllabus, slides, or textbook) to generate your knowledge graph.\n                        </p>\n                        <button\n                            onClick={() => fileInputRef.current?.click()}\n                            disabled={uploading}\n                            className=\"h-10 px-5 bg-[#C5AE79] text-[#0a0a0a] font-semibold text-sm rounded-lg shadow-[0_0_20px_rgba(197,174,121,0.3)] disabled:opacity-50\"\n                        >\n                            {uploading ? \"Analyzing...\" : \"Select PDF\"}\n                        </button>\n                    </div>\n                ) : (\n                    <ForceGraph2D\n                        ref={graphRef}\n                        graphData={{\n                            nodes: graphData.nodes,\n                            links: graphData.links,\n                        }}\n                        nodeCanvasObject={nodeCanvasObject}\n                        nodePointerAreaPaint={nodePointerAreaPaint}\n                        linkCanvasObject={linkCanvasObject}\n                        onNodeClick={handleNodeClick}\n                        backgroundColor=\"#0a0a0a\"\n                        nodeRelSize={28}\n                        linkWidth={0.8}\n                        linkColor={() => \"rgba(197, 174, 121, 0.15)\"}\n                        cooldownTicks={100}\n                        d3AlphaDecay={0.02}\n                        d3VelocityDecay={0.3}\n                        enableNodeDrag={true}\n                        enableZoomInteraction={true}\n                        enablePanInteraction={true}\n                    />\n                )}\n\n                {/* Legend */}\n                {hasGraph && (\n                    <div className=\"absolute bottom-4 left-4 p-3 rounded-xl bg-[#111]/90 border border-[#C5AE79]/15 backdrop-blur-md z-40\">\n                        <div className=\"flex flex-col gap-2 text-[10px] text-[#C5AE79]/70 font-medium\">\n                            <div className=\"flex items-center gap-2\">\n                                <div className=\"w-2 h-2 rounded-full border border-white/30\" />\n                                <span>Unseen</span>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                                <div className=\"w-2 h-2 rounded-full bg-[#ff0055] shadow-[0_0_6px_#ff0055]\" />\n                                <span className=\"text-[#ff0055]\">Struggling</span>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                                <div className=\"w-2 h-2 rounded-full bg-[#C5AE79] shadow-[0_0_6px_#C5AE79]\" />\n                                <span>Exposed</span>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                                <div className=\"w-2 h-2 rounded-full bg-[#00ffff] shadow-[0_0_6px_#00ffff]\" />\n                                <span className=\"text-[#00ffff]\">Mastered</span>\n                            </div>\n                        </div>\n                    </div>\n                )}\n\n                {/* Right Drawer */}\n                {drawerOpen && selectedNode && (\n                    <div className=\"absolute top-0 right-0 h-full w-80 bg-[#111]/95 border-l border-[#C5AE79]/15 backdrop-blur-xl z-40 flex flex-col shadow-[-10px_0_40px_rgba(0,0,0,0.5)]\">\n                        {/* Drawer Header */}\n                        <div className=\"flex items-start justify-between p-4 border-b border-[#C5AE79]/15\">\n                            <div className=\"flex-1 min-w-0\">\n                                <div className=\"flex items-center gap-2 mb-1\">\n                                    <span className=\"text-base\">{status?.emoji}</span>\n                                    <span\n                                        className=\"text-[10px] font-semibold uppercase tracking-wider\"\n                                        style={{ color: getNodeColor(selectedNode.confidence) }}\n                                    >\n                                        {status?.label}\n                                    </span>\n                                </div>\n                                <h3 className=\"text-sm font-bold text-[#C5AE79] truncate\">\n                                    {selectedNode.label}\n                                </h3>\n                                <span className=\"text-[10px] text-[#C5AE79]/40 capitalize\">\n                                    {selectedNode.concept_type}\n                                </span>\n                            </div>\n                            <button\n                                onClick={closeDrawer}\n                                className=\"p-1 text-[#C5AE79]/40 hover:text-[#C5AE79] transition-colors\"\n                            >\n                                <X className=\"w-4 h-4\" />\n                            </button>\n                        </div>\n\n                        {/* Drawer Body */}\n                        <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                            {/* Description */}\n                            <p className=\"text-xs text-[#C5AE79]/70 leading-relaxed\">\n                                {selectedNode.description}\n                            </p>\n\n                            {/* Confidence Bar */}\n                            <div>\n                                <div className=\"flex items-center justify-between text-[10px] mb-1\">\n                                    <span className=\"text-[#C5AE79]/50 font-medium\">Confidence</span>\n                                    <span className=\"font-bold text-[#C5AE79]\">\n                                        {Math.round(selectedNode.confidence * 100)}%\n                                    </span>\n                                </div>\n                                <div className=\"h-1.5 bg-[#0a0a0a] rounded-full border border-[#C5AE79]/10 overflow-hidden\">\n                                    <div\n                                        className=\"h-full rounded-full transition-all duration-500\"\n                                        style={{\n                                            width: `${selectedNode.confidence * 100}%`,\n                                            backgroundColor: getNodeColor(selectedNode.confidence),\n                                            boxShadow: `0 0 8px ${getNodeColor(selectedNode.confidence)}`,\n                                        }}\n                                    />\n                                </div>\n                            </div>\n\n                            {/* Resources */}\n                            <div>\n                                <h4 className=\"text-[10px] font-semibold text-[#C5AE79] uppercase tracking-wider mb-2\">\n                                    Recommended Resources\n                                </h4>\n                                {resourcesLoading ? (\n                                    <div className=\"flex items-center gap-2 text-[#C5AE79]/40 text-xs py-3\">\n                                        <Loader2 className=\"w-3 h-3 animate-spin\" />\n                                        Loading resources...\n                                    </div>\n                                ) : (\n                                    <div className=\"space-y-1.5\">\n                                        {resources.map((r, i) => (\n                                            <a\n                                                key={i}\n                                                href={r.url}\n                                                target=\"_blank\"\n                                                rel=\"noopener noreferrer\"\n                                                className=\"flex items-start gap-2 p-2.5 rounded-lg bg-[#0a0a0a] border border-[#C5AE79]/10 hover:border-[#00ffff]/30 hover:bg-[#00ffff]/5 transition-all group\"\n                                            >\n                                                {r.type === \"video\" ? (\n                                                    <Video className=\"w-3.5 h-3.5 text-[#C5AE79]/50 mt-0.5 shrink-0 group-hover:text-[#00ffff]\" />\n                                                ) : (\n                                                    <FileText className=\"w-3.5 h-3.5 text-[#C5AE79]/50 mt-0.5 shrink-0 group-hover:text-[#00ffff]\" />\n                                                )}\n                                                <div className=\"flex-1 min-w-0\">\n                                                    <p className=\"text-xs font-medium text-[#C5AE79]/80 group-hover:text-[#C5AE79] truncate\">\n                                                        {r.title}\n                                                    </p>\n                                                    <p className=\"text-[10px] text-[#C5AE79]/40 mt-0.5 line-clamp-2\">\n                                                        {r.why}\n                                                    </p>\n                                                </div>\n                                                <ExternalLink className=\"w-3 h-3 text-[#C5AE79]/20 shrink-0 group-hover:text-[#00ffff]\" />\n                                            </a>\n                                        ))}\n                                    </div>\n                                )}\n                            </div>\n\n                            {/* Take Poll Button */}\n                            <button\n                                onClick={() => generatePoll(selectedNode.id)}\n                                disabled={pollLoading}\n                                className=\"w-full h-9 bg-[#C5AE79]/15 border border-[#C5AE79]/30 text-[#C5AE79] text-xs font-semibold rounded-lg hover:bg-[#C5AE79]/25 transition-all disabled:opacity-50\"\n                            >\n                                {pollLoading ? \"Generating...\" : \"üéØ Take Quick Poll\"}\n                            </button>\n\n                            {/* Dev Buttons */}\n                            {isDev && (\n                                <div className=\"pt-3 border-t border-[#C5AE79]/10 space-y-1.5\">\n                                    <p className=\"text-[9px] text-[#C5AE79]/30 uppercase tracking-widest font-mono mb-2\">\n                                        Dev Controls\n                                    </p>\n                                    <button\n                                        onClick={() => updateMastery(selectedNode.id, \"correct\")}\n                                        className=\"w-full h-7 flex items-center justify-center gap-1.5 text-[10px] font-medium border border-[#00ffff]/30 text-[#00ffff] rounded-md hover:bg-[#00ffff]/10 transition-all\"\n                                    >\n                                        <ThumbsUp className=\"w-3 h-3\" /> Simulate Correct\n                                    </button>\n                                    <button\n                                        onClick={() => updateMastery(selectedNode.id, \"wrong\")}\n                                        className=\"w-full h-7 flex items-center justify-center gap-1.5 text-[10px] font-medium border border-[#ff0055]/30 text-[#ff0055] rounded-md hover:bg-[#ff0055]/10 transition-all\"\n                                    >\n                                        <ThumbsDown className=\"w-3 h-3\" /> Simulate Wrong\n                                    </button>\n                                    <button\n                                        onClick={() => updateMasteryDelta(selectedNode.id, 0.3)}\n                                        className=\"w-full h-7 flex items-center justify-center gap-1.5 text-[10px] font-medium border border-[#C5AE79]/30 text-[#C5AE79] rounded-md hover:bg-[#C5AE79]/10 transition-all\"\n                                    >\n                                        <Eye className=\"w-3 h-3\" /> Simulate Exposure (+30%)\n                                    </button>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                )}\n\n                {/* Poll Modal */}\n                {pollModalOpen && (\n                    <PollModal\n                        poll={poll}\n                        loading={pollLoading}\n                        nodeId={selectedNode?.id || \"\"}\n                        onClose={() => setPollModalOpen(false)}\n                        onResult={(evalResult) => {\n                            if (selectedNode) {\n                                updateMastery(selectedNode.id, evalResult);\n                            }\n                            setPollModalOpen(false);\n                        }}\n                    />\n                )}\n            </div>\n        </div>\n    );\n}\n\n// Poll Modal Component\nfunction PollModal({\n    poll,\n    loading,\n    nodeId,\n    onClose,\n    onResult,\n}: {\n    poll: any;\n    loading: boolean;\n    nodeId: string;\n    onClose: () => void;\n    onResult: (evalResult: string) => void;\n}) {\n    const [selected, setSelected] = useState<string | null>(null);\n    const [showResult, setShowResult] = useState(false);\n\n    const handleSubmit = () => {\n        if (!selected || !poll) return;\n        const isCorrect = selected === poll.correct_answer;\n        setShowResult(true);\n        setTimeout(() => {\n            onResult(isCorrect ? \"correct\" : \"wrong\");\n        }, 1500);\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-[#111] border border-[#C5AE79]/20 rounded-2xl w-full max-w-md p-6 shadow-[0_0_60px_rgba(0,0,0,0.8)]\">\n                {loading || !poll ? (\n                    <div className=\"flex items-center justify-center py-12\">\n                        <Loader2 className=\"w-6 h-6 animate-spin text-[#C5AE79]\" />\n                        <span className=\"ml-3 text-sm text-[#C5AE79]/60\">\n                            Generating question...\n                        </span>\n                    </div>\n                ) : (\n                    <>\n                        <div className=\"flex items-start justify-between mb-4\">\n                            <h3 className=\"text-sm font-bold text-[#C5AE79] leading-snug pr-4\">\n                                {poll.question}\n                            </h3>\n                            <button\n                                onClick={onClose}\n                                className=\"p-1 text-[#C5AE79]/40 hover:text-[#C5AE79] transition-colors shrink-0\"\n                            >\n                                <X className=\"w-4 h-4\" />\n                            </button>\n                        </div>\n\n                        <div className=\"space-y-2 mb-5\">\n                            {poll.options?.map((opt: string, i: number) => {\n                                const letter = opt[0];\n                                const isThis = selected === letter;\n                                const isCorrectAnswer = showResult && letter === poll.correct_answer;\n                                const isWrongSelected =\n                                    showResult && isThis && letter !== poll.correct_answer;\n\n                                return (\n                                    <button\n                                        key={i}\n                                        onClick={() => !showResult && setSelected(letter)}\n                                        disabled={showResult}\n                                        className={`w-full text-left p-3 rounded-lg text-xs border transition-all ${isCorrectAnswer\n                                            ? \"border-[#00ffff]/50 bg-[#00ffff]/10 text-[#00ffff]\"\n                                            : isWrongSelected\n                                                ? \"border-[#ff0055]/50 bg-[#ff0055]/10 text-[#ff0055]\"\n                                                : isThis\n                                                    ? \"border-[#C5AE79]/50 bg-[#C5AE79]/10 text-[#C5AE79]\"\n                                                    : \"border-[#C5AE79]/15 text-[#C5AE79]/70 hover:border-[#C5AE79]/30\"\n                                            }`}\n                                    >\n                                        {opt}\n                                    </button>\n                                );\n                            })}\n                        </div>\n\n                        {!showResult && (\n                            <button\n                                onClick={handleSubmit}\n                                disabled={!selected}\n                                className=\"w-full h-9 bg-[#C5AE79] text-[#0a0a0a] text-xs font-bold rounded-lg disabled:opacity-30 transition-all\"\n                            >\n                                Submit Answer\n                            </button>\n                        )}\n\n                        {showResult && (\n                            <div\n                                className={`text-center text-sm font-semibold py-2 ${selected === poll.correct_answer ? \"text-[#00ffff]\" : \"text-[#ff0055]\"}`}\n                            >\n                                {selected === poll.correct_answer\n                                    ? \"‚úÖ Correct! Mastery updated.\"\n                                    : `‚ùå Wrong. Correct answer: ${poll.correct_answer}`}\n                            </div>\n                        )}\n                    </>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}