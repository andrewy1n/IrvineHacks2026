{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/long/irvinehacks/IrvineHacks2026/kg-mastery/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n    return twMerge(clsx(inputs));\n}\n\nexport const API_BASE = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000\";\n\nexport function getStatusFromConfidence(confidence: number) {\n    if (confidence === 0) return { label: \"Unseen\", emoji: \"âš«\", color: \"grey\" } as const;\n    if (confidence < 0.4) return { label: \"Struggling\", emoji: \"ðŸ”´\", color: \"red\" } as const;\n    if (confidence < 0.7) return { label: \"Exposed\", emoji: \"ðŸŸ¡\", color: \"gold\" } as const;\n    return { label: \"Mastered\", emoji: \"ðŸŸ¢\", color: \"cyan\" } as const;\n}\n\nexport function getAuthToken(): string | null {\n    if (typeof window === \"undefined\") return null;\n    return localStorage.getItem(\"nebula_token\");\n}\n\nexport function setAuthToken(token: string) {\n    localStorage.setItem(\"nebula_token\", token);\n}\n\nexport function clearAuthToken() {\n    localStorage.removeItem(\"nebula_token\");\n}\n\nexport async function apiFetch(path: string, options: RequestInit = {}) {\n    const token = getAuthToken();\n    const headers: Record<string, string> = {\n        ...(options.headers as Record<string, string> || {}),\n    };\n    if (token) {\n        headers[\"Authorization\"] = `Bearer ${token}`;\n    }\n    if (!(options.body instanceof FormData)) {\n        headers[\"Content-Type\"] = \"application/json\";\n    }\n\n    const res = await fetch(`${API_BASE}${path}`, {\n        ...options,\n        headers,\n    });\n\n    if (res.status === 401) {\n        clearAuthToken();\n        window.location.href = \"/login\";\n        throw new Error(\"Unauthorized\");\n    }\n\n    return res;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACxB;AAEO,MAAM,WAAW,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAEpD,SAAS,wBAAwB,UAAkB;IACtD,IAAI,eAAe,GAAG,OAAO;QAAE,OAAO;QAAU,OAAO;QAAK,OAAO;IAAO;IAC1E,IAAI,aAAa,KAAK,OAAO;QAAE,OAAO;QAAc,OAAO;QAAM,OAAO;IAAM;IAC9E,IAAI,aAAa,KAAK,OAAO;QAAE,OAAO;QAAW,OAAO;QAAM,OAAO;IAAO;IAC5E,OAAO;QAAE,OAAO;QAAY,OAAO;QAAM,OAAO;IAAO;AAC3D;AAEO,SAAS;IACZ,wCAAmC,OAAO;;;AAE9C;AAEO,SAAS,aAAa,KAAa;IACtC,aAAa,OAAO,CAAC,gBAAgB;AACzC;AAEO,SAAS;IACZ,aAAa,UAAU,CAAC;AAC5B;AAEO,eAAe,SAAS,IAAY,EAAE,UAAuB,CAAC,CAAC;IAClE,MAAM,QAAQ;IACd,MAAM,UAAkC;QACpC,GAAI,QAAQ,OAAO,IAA8B,CAAC,CAAC;IACvD;IACA,IAAI,OAAO;QACP,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;IAChD;IACA,IAAI,CAAC,CAAC,QAAQ,IAAI,YAAY,QAAQ,GAAG;QACrC,OAAO,CAAC,eAAe,GAAG;IAC9B;IAEA,MAAM,MAAM,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QAC1C,GAAG,OAAO;QACV;IACJ;IAEA,IAAI,IAAI,MAAM,KAAK,KAAK;QACpB;QACA,OAAO,QAAQ,CAAC,IAAI,GAAG;QACvB,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO;AACX"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/long/irvinehacks/IrvineHacks2026/kg-mastery/src/store/nebulaStore.ts"],"sourcesContent":["import { create } from \"zustand\";\nimport type { GraphNode, GraphData, Resource, PollData } from \"@/lib/types\";\nimport { apiFetch } from \"@/lib/utils\";\n\ninterface NebulaState {\n    // Graph\n    graphData: GraphData | null;\n    loading: boolean;\n\n    // Selection\n    selectedNode: GraphNode | null;\n    drawerOpen: boolean;\n\n    // Resources\n    resources: Resource[];\n    resourcesLoading: boolean;\n\n    // Poll\n    poll: PollData | null;\n    pollLoading: boolean;\n    pollModalOpen: boolean;\n\n    // Actions\n    fetchGraph: (courseId: string) => Promise<void>;\n    selectNode: (node: GraphNode | null) => void;\n    closeDrawer: () => void;\n    fetchResources: (conceptId: string) => Promise<void>;\n    generatePoll: (conceptId: string) => Promise<void>;\n    updateMastery: (conceptId: string, evalResult: string) => Promise<void>;\n    updateMasteryDelta: (conceptId: string, delta: number) => Promise<void>;\n    setPollModalOpen: (open: boolean) => void;\n    setGraphData: (data: GraphData) => void;\n}\n\nexport const useNebulaStore = create<NebulaState>((set, get) => ({\n    graphData: null,\n    loading: false,\n    selectedNode: null,\n    drawerOpen: false,\n    resources: [],\n    resourcesLoading: false,\n    poll: null,\n    pollLoading: false,\n    pollModalOpen: false,\n\n    fetchGraph: async (courseId: string) => {\n        set({ loading: true });\n        try {\n            const res = await apiFetch(`/api/courses/${courseId}/graph`);\n            if (res.ok) {\n                const data = await res.json();\n                set({ graphData: data, loading: false });\n            } else {\n                set({ loading: false });\n            }\n        } catch {\n            set({ loading: false });\n        }\n    },\n\n    selectNode: (node: GraphNode | null) => {\n        set({ selectedNode: node, drawerOpen: !!node, resources: [], poll: null });\n        if (node) {\n            get().fetchResources(node.id);\n        }\n    },\n\n    closeDrawer: () => set({ drawerOpen: false, selectedNode: null }),\n\n    fetchResources: async (conceptId: string) => {\n        set({ resourcesLoading: true });\n        try {\n            const res = await apiFetch(`/api/concepts/${conceptId}/resources`);\n            if (res.ok) {\n                const data = await res.json();\n                set({ resources: data, resourcesLoading: false });\n            } else {\n                set({ resourcesLoading: false });\n            }\n        } catch {\n            set({ resourcesLoading: false });\n        }\n    },\n\n    generatePoll: async (conceptId: string) => {\n        set({ pollLoading: true, pollModalOpen: true });\n        try {\n            const res = await apiFetch(`/api/concepts/${conceptId}/poll`, { method: \"POST\" });\n            if (res.ok) {\n                const data = await res.json();\n                set({ poll: data, pollLoading: false });\n            } else {\n                set({ pollLoading: false });\n            }\n        } catch {\n            set({ pollLoading: false });\n        }\n    },\n\n    updateMastery: async (conceptId: string, evalResult: string) => {\n        try {\n            const res = await apiFetch(`/api/mastery/${conceptId}`, {\n                method: \"PUT\",\n                body: JSON.stringify({ eval_result: evalResult }),\n            });\n            if (res.ok) {\n                const data = await res.json();\n                // Update the node confidence in the graph\n                set((state) => {\n                    if (!state.graphData) return {};\n                    const nodes = state.graphData.nodes.map((n) =>\n                        n.id === conceptId ? { ...n, confidence: data.confidence } : n\n                    );\n                    const updatedNode = nodes.find((n) => n.id === conceptId) || null;\n                    return {\n                        graphData: { ...state.graphData, nodes },\n                        selectedNode: state.selectedNode?.id === conceptId ? updatedNode : state.selectedNode,\n                    };\n                });\n            }\n        } catch {\n            // silent fail for MVP\n        }\n    },\n\n    updateMasteryDelta: async (conceptId: string, delta: number) => {\n        try {\n            const res = await apiFetch(`/api/mastery/${conceptId}`, {\n                method: \"PUT\",\n                body: JSON.stringify({ delta }),\n            });\n            if (res.ok) {\n                const data = await res.json();\n                set((state) => {\n                    if (!state.graphData) return {};\n                    const nodes = state.graphData.nodes.map((n) =>\n                        n.id === conceptId ? { ...n, confidence: data.confidence } : n\n                    );\n                    const updatedNode = nodes.find((n) => n.id === conceptId) || null;\n                    return {\n                        graphData: { ...state.graphData, nodes },\n                        selectedNode: state.selectedNode?.id === conceptId ? updatedNode : state.selectedNode,\n                    };\n                });\n            }\n        } catch {\n            // silent fail for MVP\n        }\n    },\n\n    setPollModalOpen: (open: boolean) => set({ pollModalOpen: open }),\n\n    setGraphData: (data: GraphData) => set({ graphData: data }),\n}));\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 288, "column": 0}, "map": {"version":3,"sources":["file:///Users/long/irvinehacks/IrvineHacks2026/kg-mastery/src/lib/colors.ts"],"sourcesContent":["export const COLOR_HEX: Record<string, string> = {\n    gray: \"#94a3b8\",\n    red: \"#fb923c\",       // orange-400 (matches heatmap struggling)\n    yellow: \"#eab308\",\n    green: \"#22c55e\",\n    active: \"#3b82f6\",\n};\n\nexport function confidenceToColor(confidence: number): string {\n    if (confidence === 0) return \"gray\";\n    if (confidence < 0.4) return \"red\";\n    if (confidence < 0.7) return \"yellow\";\n    return \"green\";\n}\n\nexport function confidenceToFill(confidence: number): string {\n    if (confidence === 0) return \"#e2e8f0\";     // slate-200 (unvisited)\n    if (confidence < 0.2) return \"#fecaca\";     // red-200\n    if (confidence < 0.4) return \"#fed7aa\";     // orange-200\n    if (confidence < 0.55) return \"#fef08a\";   // yellow-200\n    if (confidence < 0.7) return \"#d9f99d\";    // lime-200\n    if (confidence < 0.85) return \"#bbf7d0\";   // green-200\n    return \"#86efac\";                            // green-300\n}\n\n// 4-bucket node fill for the student knowledge graph (matches heatmap visual bands)\nexport function confidenceToNodeFill(confidence: number): string {\n    if (confidence === 0) return \"#e2e8f0\";     // slate-200 (not started)\n    if (confidence < 0.4) return \"#fed7aa\";     // orange-200 (struggling)\n    if (confidence < 0.55) return \"#fef08a\";   // yellow-200 (partial)\n    if (confidence < 0.7) return \"#d9f99d\";    // lime-200 (good)\n    return \"#bbf7d0\";                            // green-200 (mastered)\n}\n\n// 4-bucket node border for the student knowledge graph\nexport function confidenceToNodeBorder(confidence: number): string {\n    if (confidence === 0) return \"#94a3b8\";     // gray\n    if (confidence < 0.4) return \"#fb923c\";    // orange-400 (struggling)\n    if (confidence < 0.55) return \"#facc15\";   // yellow-400 (partial)\n    if (confidence < 0.7) return \"#a3e635\";    // lime-400 (good)\n    return \"#4ade80\";                            // green-400 (mastered)\n}\n\n// Dark theme: node fill (subtle on #0a0a0a)\nexport function confidenceToNodeFillDark(confidence: number): string {\n    if (confidence === 0) return \"rgba(148,163,184,0.12)\";\n    if (confidence < 0.4) return \"rgba(251,146,60,0.18)\";\n    if (confidence < 0.55) return \"rgba(250,204,21,0.18)\";\n    if (confidence < 0.7) return \"rgba(163,230,53,0.18)\";\n    return \"rgba(74,222,128,0.2)\";\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAO,MAAM,YAAoC;IAC7C,MAAM;IACN,KAAK;IACL,QAAQ;IACR,OAAO;IACP,QAAQ;AACZ;AAEO,SAAS,kBAAkB,UAAkB;IAChD,IAAI,eAAe,GAAG,OAAO;IAC7B,IAAI,aAAa,KAAK,OAAO;IAC7B,IAAI,aAAa,KAAK,OAAO;IAC7B,OAAO;AACX;AAEO,SAAS,iBAAiB,UAAkB;IAC/C,IAAI,eAAe,GAAG,OAAO,WAAe,wBAAwB;IACpE,IAAI,aAAa,KAAK,OAAO,WAAe,UAAU;IACtD,IAAI,aAAa,KAAK,OAAO,WAAe,aAAa;IACzD,IAAI,aAAa,MAAM,OAAO,WAAa,aAAa;IACxD,IAAI,aAAa,KAAK,OAAO,WAAc,WAAW;IACtD,IAAI,aAAa,MAAM,OAAO,WAAa,YAAY;IACvD,OAAO,WAAsC,YAAY;AAC7D;AAGO,SAAS,qBAAqB,UAAkB;IACnD,IAAI,eAAe,GAAG,OAAO,WAAe,0BAA0B;IACtE,IAAI,aAAa,KAAK,OAAO,WAAe,0BAA0B;IACtE,IAAI,aAAa,MAAM,OAAO,WAAa,uBAAuB;IAClE,IAAI,aAAa,KAAK,OAAO,WAAc,kBAAkB;IAC7D,OAAO,WAAsC,uBAAuB;AACxE;AAGO,SAAS,uBAAuB,UAAkB;IACrD,IAAI,eAAe,GAAG,OAAO,WAAe,OAAO;IACnD,IAAI,aAAa,KAAK,OAAO,WAAc,0BAA0B;IACrE,IAAI,aAAa,MAAM,OAAO,WAAa,uBAAuB;IAClE,IAAI,aAAa,KAAK,OAAO,WAAc,kBAAkB;IAC7D,OAAO,WAAsC,uBAAuB;AACxE;AAGO,SAAS,yBAAyB,UAAkB;IACvD,IAAI,eAAe,GAAG,OAAO;IAC7B,IAAI,aAAa,KAAK,OAAO;IAC7B,IAAI,aAAa,MAAM,OAAO;IAC9B,IAAI,aAAa,KAAK,OAAO;IAC7B,OAAO;AACX"}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file:///Users/long/irvinehacks/IrvineHacks2026/kg-mastery/src/lib/graph.ts"],"sourcesContent":["export interface GraphEdge {\n    source: string;\n    target: string;\n}\n\n/**\n * BFS backwards through prerequisite edges to find all ancestor nodes.\n * Edges go source (prereq) â†’ target (dependent), so we follow edges\n * where target === current to find parents.\n *\n * Handles react-force-graph-2d edge mutation (source/target can be string or object).\n */\nexport function getAncestors(nodeId: string, edges: GraphEdge[]): Set<string> {\n    const ancestors = new Set<string>();\n    const queue = [nodeId];\n    while (queue.length > 0) {\n        const current = queue.shift()!;\n        for (const edge of edges) {\n            const source = typeof edge.source === \"object\" ? (edge.source as { id: string }).id : edge.source;\n            const target = typeof edge.target === \"object\" ? (edge.target as { id: string }).id : edge.target;\n            if (target === current && !ancestors.has(source)) {\n                ancestors.add(source);\n                queue.push(source);\n            }\n        }\n    }\n    return ancestors;\n}\n\n/** Format seconds into MM:SS for transcript display */\nexport function formatTimestamp(seconds: number): string {\n    const m = Math.floor(seconds / 60);\n    const s = Math.floor(seconds % 60);\n    return `${m}:${s.toString().padStart(2, \"0\")}`;\n}\n"],"names":[],"mappings":";;;;;;AAYO,SAAS,aAAa,MAAc,EAAE,KAAkB;IAC3D,MAAM,YAAY,IAAI;IACtB,MAAM,QAAQ;QAAC;KAAO;IACtB,MAAO,MAAM,MAAM,GAAG,EAAG;QACrB,MAAM,UAAU,MAAM,KAAK;QAC3B,KAAK,MAAM,QAAQ,MAAO;YACtB,MAAM,SAAS,OAAO,KAAK,MAAM,KAAK,WAAW,AAAC,KAAK,MAAM,CAAoB,EAAE,GAAG,KAAK,MAAM;YACjG,MAAM,SAAS,OAAO,KAAK,MAAM,KAAK,WAAW,AAAC,KAAK,MAAM,CAAoB,EAAE,GAAG,KAAK,MAAM;YACjG,IAAI,WAAW,WAAW,CAAC,UAAU,GAAG,CAAC,SAAS;gBAC9C,UAAU,GAAG,CAAC;gBACd,MAAM,IAAI,CAAC;YACf;QACJ;IACJ;IACA,OAAO;AACX;AAGO,SAAS,gBAAgB,OAAe;IAC3C,MAAM,IAAI,KAAK,KAAK,CAAC,UAAU;IAC/B,MAAM,IAAI,KAAK,KAAK,CAAC,UAAU;IAC/B,OAAO,GAAG,EAAE,CAAC,EAAE,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;AAClD"}},
    {"offset": {"line": 382, "column": 0}, "map": {"version":3,"sources":["file:///Users/long/irvinehacks/IrvineHacks2026/kg-mastery/src/components/graph/KnowledgeGraph.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState, useMemo, useCallback } from \"react\";\nimport * as d3 from \"d3\";\nimport { motion } from \"motion/react\";\nimport useMeasure from \"react-use-measure\";\nimport { confidenceToNodeFillDark, confidenceToNodeBorder } from \"@/lib/colors\";\nimport type { GraphEdge } from \"@/lib/graph\";\nimport { RefreshCw, ZoomIn, ZoomOut } from \"lucide-react\";\n\nexport interface GraphNode {\n    id: string;\n    label: string;\n    color: string;\n    confidence: number;\n    description?: string;\n    category?: string;\n    difficulty?: number;\n}\n\nexport type { GraphEdge };\n\ninterface KnowledgeGraphProps {\n    nodes: GraphNode[];\n    edges: GraphEdge[];\n    activeConceptId?: string | null;\n    highlightedNodeIds?: Set<string>;\n    onNodeClick?: (node: GraphNode) => void;\n    width?: number;\n    height?: number;\n}\n\ninterface SimNode extends GraphNode {\n    x?: number;\n    y?: number;\n    vx?: number;\n    vy?: number;\n    index?: number;\n    level?: number;\n    relevance?: number;\n}\n\ninterface SimLink {\n    source: string | SimNode;\n    target: string | SimNode;\n}\n\nconst NODE_BASE_RADIUS = 36;\nconst NODE_FONT_SIZE = 10;\nconst CHAR_WIDTH_RATIO = 0.68;\nconst NODE_PADDING = 14;\nconst MIN_ZOOM = 0.3;\nconst MAX_ZOOM = 2.5;\nconst REVEAL_DURATION_MS = 2000;\nconst REVEAL_INITIAL_DELAY = 300;\nconst REVEAL_FPS = 30;\nconst DRAG_THRESHOLD = 8;\nconst ACTIVE_GLOW = \"#C5AE79\";\n\nfunction getNodeRadius(label: string, relevance: number): number {\n    const charWidth = NODE_FONT_SIZE * CHAR_WIDTH_RATIO;\n    const longestWord = label.split(/[\\s/\\-]+/).reduce((a, b) => (a.length > b.length ? a : b), \"\");\n    const wordWidth = longestWord.length * charWidth;\n    const minRadiusForWord = (wordWidth + NODE_PADDING) / 2;\n    const baseRadius = relevance * 20 + NODE_BASE_RADIUS;\n    return Math.max(baseRadius, minRadiusForWord);\n}\n\nexport default function KnowledgeGraph({\n    nodes,\n    edges,\n    activeConceptId,\n    highlightedNodeIds,\n    onNodeClick,\n}: KnowledgeGraphProps) {\n    const [containerRef, bounds] = useMeasure();\n    const [simNodes, setSimNodes] = useState<SimNode[]>([]);\n    const [simLinks, setSimLinks] = useState<SimLink[]>([]);\n    const [ready, setReady] = useState(false);\n    const positionCacheRef = useRef<Map<string, { x: number; y: number }>>(new Map());\n    const originalPositionsRef = useRef<Map<string, { x: number; y: number }>>(new Map());\n    const [zoom, setZoom] = useState(0.75);\n    const [pan, setPan] = useState({ x: 0, y: 0 });\n    const isPanning = useRef(false);\n    const panStart = useRef({ x: 0, y: 0 });\n    const panOffset = useRef({ x: 0, y: 0 });\n    const [revealProgress, setRevealProgress] = useState(0);\n    const onNodeClickRef = useRef(onNodeClick);\n    onNodeClickRef.current = onNodeClick;\n    const draggingNodeId = useRef<string | null>(null);\n    const dragStartPointer = useRef({ x: 0, y: 0 });\n    const dragStartNodePos = useRef({ x: 0, y: 0 });\n    const hasDraggedPastThreshold = useRef(false);\n    const simNodesRef = useRef(simNodes);\n    simNodesRef.current = simNodes;\n    const zoomRef = useRef(zoom);\n    zoomRef.current = zoom;\n\n    useEffect(() => {\n        if (nodes.length === 0) return;\n        const nodesCopy: SimNode[] = nodes.map((n) => {\n            const cached = positionCacheRef.current.get(n.id);\n            return {\n                ...n,\n                relevance: (n.difficulty ?? 3) / 5,\n                ...(cached ? { x: cached.x, y: cached.y } : {}),\n            };\n        });\n        const nodeIds = new Set(nodesCopy.map((n) => n.id));\n        const linksCopy: SimLink[] = edges\n            .filter((e) => nodeIds.has(e.source) && nodeIds.has(e.target))\n            .map((e) => ({ source: e.source, target: e.target }));\n        const levels: Record<string, number> = {};\n        nodesCopy.forEach((n) => {\n            levels[n.id] = 0;\n        });\n        for (let i = 0; i < nodesCopy.length; i++) {\n            linksCopy.forEach((l) => {\n                const s = typeof l.source === \"object\" ? (l.source as SimNode).id : l.source;\n                const t = typeof l.target === \"object\" ? (l.target as SimNode).id : l.target;\n                if (levels[s] !== undefined && levels[t] !== undefined) {\n                    if (levels[t] < levels[s] + 1) {\n                        levels[t] = levels[s] + 1;\n                    }\n                }\n            });\n        }\n        nodesCopy.forEach((n) => {\n            n.level = levels[n.id];\n        });\n        setSimNodes(nodesCopy);\n        setSimLinks(linksCopy);\n    }, [nodes, edges]);\n\n    useEffect(() => {\n        if (!ready) return;\n        setRevealProgress(0);\n        const stepMs = 1000 / REVEAL_FPS;\n        const steps = Math.ceil(REVEAL_DURATION_MS / stepMs);\n        let frame = 0;\n        const cleanupRef = { current: () => {} };\n        const delayTimer = setTimeout(() => {\n            const interval = setInterval(() => {\n                frame++;\n                const t = Math.min(frame / steps, 1);\n                setRevealProgress(t);\n                if (t >= 1) clearInterval(interval);\n            }, stepMs);\n            cleanupRef.current = () => clearInterval(interval);\n        }, REVEAL_INITIAL_DELAY);\n        return () => {\n            clearTimeout(delayTimer);\n            cleanupRef.current();\n        };\n    }, [ready]);\n\n    useEffect(() => {\n        if (!bounds.width || !bounds.height || simNodes.length === 0) return;\n        const allCached = simNodes.every((n) => n.x !== undefined && n.y !== undefined);\n        if (allCached && ready) {\n            return;\n        }\n        const paddingX = 100;\n        const availableWidth = bounds.width - paddingX * 2;\n        const maxLevel = Math.max(...simNodes.map((n) => n.level ?? 0));\n        const getTargetX = (node: SimNode) => {\n            if (maxLevel === 0) return bounds.width / 2;\n            return paddingX + ((node.level ?? 0) / maxLevel) * availableWidth;\n        };\n        const simulation = d3\n            .forceSimulation(simNodes)\n            .force(\n                \"link\",\n                d3\n                    .forceLink<SimNode, SimLink>(simLinks)\n                    .id((d) => d.id)\n                    .distance(180)\n            )\n            .force(\"charge\", d3.forceManyBody().strength(-500))\n            .force(\n                \"collide\",\n                d3.forceCollide<SimNode>().radius((d) => getNodeRadius(d.label, d.relevance ?? 0.6) * 2)\n            )\n            .force(\n                \"x\",\n                d3.forceX<SimNode>().x((d) => getTargetX(d)).strength(0.8)\n            )\n            .force(\"y\", d3.forceY(bounds.height / 2).strength(0.1));\n\n        simulation.stop();\n        for (let i = 0; i < 300; i++) {\n            simulation.tick();\n        }\n        const isFirstLayout = originalPositionsRef.current.size === 0;\n        for (const node of simNodes) {\n            if (node.x !== undefined && node.y !== undefined) {\n                positionCacheRef.current.set(node.id, { x: node.x, y: node.y });\n                if (isFirstLayout) {\n                    originalPositionsRef.current.set(node.id, { x: node.x, y: node.y });\n                }\n            }\n        }\n        const xs = simNodes.filter((n) => n.x != null).map((n) => n.x!);\n        const ys = simNodes.filter((n) => n.y != null).map((n) => n.y!);\n        if (xs.length > 0 && ys.length > 0) {\n            const maxR = Math.max(...simNodes.map((n) => getNodeRadius(n.label, n.relevance ?? 0.6)));\n            const pad = maxR + 20;\n            const minX = Math.min(...xs) - pad;\n            const maxX = Math.max(...xs) + pad;\n            const minY = Math.min(...ys) - pad;\n            const maxY = Math.max(...ys) + pad;\n            const graphW = maxX - minX;\n            const graphH = maxY - minY;\n            const scaleX = bounds.width / graphW;\n            const scaleY = bounds.height / graphH;\n            const fitZoom = Math.min(scaleX, scaleY, 1);\n            const graphCenterX = (minX + maxX) / 2;\n            const graphCenterY = (minY + maxY) / 2;\n            const containerCenterX = bounds.width / 2;\n            const containerCenterY = bounds.height / 2;\n            setZoom(fitZoom);\n            setPan({\n                x: containerCenterX - graphCenterX * fitZoom - containerCenterX * (1 - fitZoom),\n                y: containerCenterY - graphCenterY * fitZoom - containerCenterY * (1 - fitZoom),\n            });\n        }\n        setSimNodes([...simNodes]);\n        setReady(true);\n        return () => {\n            simulation.stop();\n        };\n    }, [bounds.width, bounds.height, simNodes.length]);\n\n    const revealRank = useMemo(() => {\n        const positioned = simNodes.filter((n) => n.x != null);\n        if (positioned.length === 0) return new Map<string, number>();\n        const sorted = [...positioned].sort((a, b) => a.x! - b.x!);\n        const map = new Map<string, number>();\n        sorted.forEach((n, i) => {\n            map.set(n.id, sorted.length > 1 ? i / (sorted.length - 1) : 0);\n        });\n        return map;\n    }, [simNodes]);\n\n    const handleWheel = useCallback((e: React.WheelEvent) => {\n        e.preventDefault();\n        setZoom((prev) => {\n            const delta = e.deltaY > 0 ? 0.9 : 1.1;\n            return Math.min(MAX_ZOOM, Math.max(MIN_ZOOM, prev * delta));\n        });\n    }, []);\n\n    const handlePointerDown = useCallback(\n        (e: React.PointerEvent) => {\n            const nodeEl = (e.target as HTMLElement).closest(\"[data-graph-node]\");\n            if (nodeEl) {\n                const nodeId = nodeEl.getAttribute(\"data-node-id\");\n                if (!nodeId) return;\n                const node = simNodesRef.current.find((n) => n.id === nodeId);\n                if (!node || node.x === undefined || node.y === undefined) return;\n                draggingNodeId.current = nodeId;\n                dragStartPointer.current = { x: e.clientX, y: e.clientY };\n                dragStartNodePos.current = { x: node.x, y: node.y };\n                hasDraggedPastThreshold.current = false;\n                (e.currentTarget as HTMLElement).setPointerCapture(e.pointerId);\n                return;\n            }\n            isPanning.current = true;\n            panStart.current = { x: e.clientX, y: e.clientY };\n            panOffset.current = { x: pan.x, y: pan.y };\n            (e.target as HTMLElement).setPointerCapture(e.pointerId);\n        },\n        [pan]\n    );\n\n    const handlePointerMove = useCallback((e: React.PointerEvent) => {\n        if (draggingNodeId.current) {\n            const dx = e.clientX - dragStartPointer.current.x;\n            const dy = e.clientY - dragStartPointer.current.y;\n            if (!hasDraggedPastThreshold.current) {\n                if (Math.sqrt(dx * dx + dy * dy) < DRAG_THRESHOLD) return;\n                hasDraggedPastThreshold.current = true;\n            }\n            const z = zoomRef.current;\n            const newX = dragStartNodePos.current.x + dx / z;\n            const newY = dragStartNodePos.current.y + dy / z;\n            const id = draggingNodeId.current;\n            positionCacheRef.current.set(id, { x: newX, y: newY });\n            setSimNodes((prev) =>\n                prev.map((n) => (n.id === id ? { ...n, x: newX, y: newY } : n))\n            );\n            return;\n        }\n        if (!isPanning.current) return;\n        setPan({\n            x: panOffset.current.x + (e.clientX - panStart.current.x),\n            y: panOffset.current.y + (e.clientY - panStart.current.y),\n        });\n    }, []);\n\n    const handlePointerUp = useCallback(() => {\n        if (draggingNodeId.current) {\n            if (!hasDraggedPastThreshold.current) {\n                const node = simNodesRef.current.find((n) => n.id === draggingNodeId.current);\n                if (node) onNodeClickRef.current?.(node);\n            }\n            draggingNodeId.current = null;\n            hasDraggedPastThreshold.current = false;\n            return;\n        }\n        isPanning.current = false;\n    }, []);\n\n    const handleReset = useCallback(() => {\n        setZoom(0.75);\n        setPan({ x: 0, y: 0 });\n        if (originalPositionsRef.current.size > 0) {\n            const originals = originalPositionsRef.current;\n            positionCacheRef.current = new Map(originals);\n            setSimNodes((prev) =>\n                prev.map((n) => {\n                    const pos = originals.get(n.id);\n                    return pos ? { ...n, x: pos.x, y: pos.y } : n;\n                })\n            );\n        }\n    }, []);\n\n    const nodeMap = useMemo(() => {\n        const map = new Map<string, SimNode>();\n        simNodes.forEach((n) => map.set(n.id, n));\n        return map;\n    }, [simNodes]);\n\n    const activeSet = useMemo(() => {\n        const set = new Set<string>();\n        if (highlightedNodeIds) {\n            highlightedNodeIds.forEach((id) => set.add(id));\n        }\n        return set;\n    }, [highlightedNodeIds]);\n\n    return (\n        <div\n            className=\"relative w-full h-full overflow-hidden bg-[#0a0a0a] rounded-xl border border-[#1e1e24] font-sans\"\n            onWheel={handleWheel}\n            onPointerDown={handlePointerDown}\n            onPointerMove={handlePointerMove}\n            onPointerUp={handlePointerUp}\n            onPointerLeave={handlePointerUp}\n            style={{ touchAction: \"none\" }}\n        >\n            <div\n                className=\"absolute inset-0 opacity-40 pointer-events-none\"\n                style={{\n                    backgroundImage: \"radial-gradient(circle, rgba(197,174,121,0.06) 1px, transparent 1px)\",\n                    backgroundSize: \"32px 32px\",\n                }}\n            />\n            <div ref={containerRef} className=\"w-full h-full\">\n                <div\n                    className=\"absolute inset-0 origin-center\"\n                    style={{ transform: `translate(${pan.x}px, ${pan.y}px) scale(${zoom})` }}\n                >\n                    <svg\n                        className=\"absolute inset-0 pointer-events-none\"\n                        width={bounds.width || \"100%\"}\n                        height={bounds.height || \"100%\"}\n                        style={{ overflow: \"visible\" }}\n                    >\n                        <defs>\n                            <marker\n                                id=\"arrowhead\"\n                                markerWidth=\"12\"\n                                markerHeight=\"10\"\n                                refX=\"10\"\n                                refY=\"5\"\n                                orient=\"auto\"\n                                markerUnits=\"userSpaceOnUse\"\n                            >\n                                <polygon points=\"0 0, 12 5, 0 10\" fill=\"#64748b\" />\n                            </marker>\n                            <marker\n                                id=\"arrowhead-active\"\n                                markerWidth=\"14\"\n                                markerHeight=\"10\"\n                                refX=\"12\"\n                                refY=\"5\"\n                                orient=\"auto\"\n                                markerUnits=\"userSpaceOnUse\"\n                            >\n                                <polygon points=\"0 0, 14 5, 0 10\" fill=\"#C5AE79\" />\n                            </marker>\n                        </defs>\n                        <g>\n                            {simLinks.map((link, i) => {\n                                const srcId = typeof link.source === \"object\" ? (link.source as SimNode).id : link.source;\n                                const tgtId = typeof link.target === \"object\" ? (link.target as SimNode).id : link.target;\n                                const source = nodeMap.get(srcId);\n                                const target = nodeMap.get(tgtId);\n                                if (\n                                    !source ||\n                                    !target ||\n                                    source.x == null ||\n                                    target.x == null ||\n                                    source.y == null ||\n                                    target.y == null\n                                )\n                                    return null;\n                                const isSourceRel = activeSet.has(source.id);\n                                const isTargetRel = activeSet.has(target.id);\n                                const isPath = isSourceRel && isTargetRel;\n                                const targetSize = getNodeRadius(target.label, target.relevance ?? 0.6);\n                                const sourceSize = getNodeRadius(source.label, source.relevance ?? 0.6);\n                                const totalDx = target.x - source.x;\n                                const totalDy = target.y - source.y;\n                                const dist = Math.sqrt(totalDx * totalDx + totalDy * totalDy);\n                                if (dist === 0) return null;\n                                const ux = totalDx / dist;\n                                const uy = totalDy / dist;\n                                const margin = 6;\n                                const totalInset = sourceSize + targetSize + margin;\n                                let sx: number, sy: number, tx: number, ty: number;\n                                if (dist > totalInset) {\n                                    sx = source.x + ux * sourceSize;\n                                    sy = source.y + uy * sourceSize;\n                                    tx = target.x - ux * (targetSize + margin);\n                                    ty = target.y - uy * (targetSize + margin);\n                                } else {\n                                    sx = source.x;\n                                    sy = source.y;\n                                    tx = target.x;\n                                    ty = target.y;\n                                }\n                                const cdx = tx - sx;\n                                const d = `M${sx},${sy} C${sx + cdx / 2},${sy} ${tx - cdx / 2},${ty} ${tx},${ty}`;\n                                const sourceRank = revealRank.get(source.id) ?? 0;\n                                const targetRank = revealRank.get(target.id) ?? 0;\n                                const edgeRevealed = revealProgress > Math.max(sourceRank, targetRank);\n                                const particleColor = isPath ? \"#C5AE79\" : \"#64748b\";\n                                return (\n                                    <g key={`link-${i}`}>\n                                        <path\n                                            d={d}\n                                            stroke={isPath ? \"#C5AE79\" : \"#64748b\"}\n                                            strokeWidth={isPath ? 2.5 : 1.5}\n                                            opacity={\n                                                edgeRevealed\n                                                    ? isPath\n                                                        ? 1\n                                                        : activeSet.size > 0\n                                                          ? 0.15\n                                                          : 0.8\n                                                    : 0\n                                            }\n                                            fill=\"none\"\n                                            markerEnd={isPath ? \"url(#arrowhead-active)\" : \"url(#arrowhead)\"}\n                                            style={{ transition: \"opacity 0.4s ease-out\" }}\n                                        />\n                                        {edgeRevealed && (\n                                            <motion.circle\n                                                r=\"2.5\"\n                                                fill={particleColor}\n                                                initial={{ offsetDistance: \"0%\", opacity: 0 }}\n                                                animate={{\n                                                    offsetDistance: [\"0%\", \"100%\"],\n                                                    opacity: [0, 0.5, 0.5, 0],\n                                                }}\n                                                transition={{\n                                                    duration: 3 + (i % 5) * 0.4,\n                                                    delay: i * 0.2,\n                                                    repeat: Infinity,\n                                                    ease: \"linear\",\n                                                }}\n                                                style={{ offsetPath: `path(\"${d}\")` } as React.CSSProperties}\n                                            />\n                                        )}\n                                    </g>\n                                );\n                            })}\n                        </g>\n                    </svg>\n                    <div className=\"absolute inset-0 pointer-events-none\" data-graph-nodes>\n                        {simNodes.map((node) => {\n                            if (node.x === undefined || node.y === undefined) return null;\n                            const size = getNodeRadius(node.label, node.relevance ?? 0.6);\n                            const borderColor = confidenceToNodeBorder(node.confidence ?? 0);\n                            const isInSet = activeSet.has(node.id);\n                            const hasSelection = activeSet.size > 0;\n                            const isDimmed = hasSelection && !isInSet;\n                            const isActive = node.id === activeConceptId;\n                            const glowColor = isActive ? ACTIVE_GLOW : borderColor;\n                            const baseFill = confidenceToNodeFillDark(node.confidence ?? 0);\n                            const nodeRank = revealRank.get(node.id) ?? 0;\n                            const nodeRevealed = revealProgress > nodeRank;\n                            const targetOpacity = nodeRevealed ? (isDimmed ? 0.2 : 1) : 0;\n                            const targetScale = nodeRevealed\n                                ? isActive\n                                    ? 1.25\n                                    : isInSet && !isDimmed\n                                      ? 1.08\n                                      : 1\n                                : 0;\n                            return (\n                                <motion.div\n                                    key={node.id}\n                                    initial={false}\n                                    animate={{\n                                        opacity: targetOpacity,\n                                        scale: targetScale,\n                                        x: node.x - size,\n                                        y: node.y - size,\n                                    }}\n                                    transition={{\n                                        opacity: { duration: 0.4 },\n                                        scale: { duration: 0.3 },\n                                        x: { duration: draggingNodeId.current === node.id ? 0.06 : 0.4 },\n                                        y: { duration: draggingNodeId.current === node.id ? 0.06 : 0.4 },\n                                    }}\n                                    data-graph-node\n                                    data-node-id={node.id}\n                                    className=\"absolute rounded-full flex items-center justify-center cursor-pointer pointer-events-auto transition-all duration-500 ease-out\"\n                                    style={{\n                                        width: size * 2,\n                                        height: size * 2,\n                                        background:\n                                            isInSet || isActive\n                                                ? `linear-gradient(135deg, ${glowColor}20, ${glowColor}10)`\n                                                : baseFill,\n                                        border: isInSet\n                                            ? `2.5px solid ${glowColor}`\n                                            : isActive\n                                              ? `2.5px solid ${ACTIVE_GLOW}`\n                                              : `2px solid ${borderColor}`,\n                                        boxShadow: isInSet\n                                            ? `0 0 24px ${glowColor}40, 0 4px 12px ${glowColor}20`\n                                            : isActive\n                                              ? `0 0 20px ${ACTIVE_GLOW}35, 0 4px 12px ${ACTIVE_GLOW}15`\n                                              : \"0 0 12px rgba(0,0,0,0.4), 0 1px 3px rgba(0,0,0,0.3)\",\n                                    }}\n                                >\n                                    <div\n                                        className=\"absolute rounded-full pointer-events-none\"\n                                        style={{\n                                            top: \"8%\",\n                                            left: \"15%\",\n                                            width: \"55%\",\n                                            height: \"35%\",\n                                            background:\n                                                \"linear-gradient(180deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 100%)\",\n                                            borderRadius: \"50%\",\n                                        }}\n                                    />\n                                    <div className=\"absolute inset-0 flex items-center justify-center p-1.5 text-center pointer-events-none overflow-hidden\">\n                                        <p\n                                            className={`font-[family-name:var(--font-comfortaa)] font-semibold leading-[1.15] transition-colors ${\n                                                isInSet || isActive ? \"text-[#C5AE79]\" : \"text-slate-200\"\n                                            }`}\n                                            style={{\n                                                fontSize: `${NODE_FONT_SIZE}px`,\n                                                wordBreak: \"keep-all\",\n                                                overflowWrap: \"normal\",\n                                            }}\n                                        >\n                                            {node.label}\n                                        </p>\n                                    </div>\n                                </motion.div>\n                            );\n                        })}\n                    </div>\n                </div>\n            </div>\n            <div className=\"absolute bottom-4 right-4 flex flex-col gap-1.5\">\n                <button\n                    onClick={() => setZoom((z) => Math.min(MAX_ZOOM, z * 1.25))}\n                    className=\"p-2 rounded-lg bg-[#111] hover:bg-[#1e1e24] text-[#C5AE79]/60 hover:text-[#C5AE79] border border-[#1e1e24] backdrop-blur-md transition-colors\"\n                    title=\"Zoom In\"\n                >\n                    <ZoomIn size={16} />\n                </button>\n                <button\n                    onClick={() => setZoom((z) => Math.max(MIN_ZOOM, z * 0.8))}\n                    className=\"p-2 rounded-lg bg-[#111] hover:bg-[#1e1e24] text-[#C5AE79]/60 hover:text-[#C5AE79] border border-[#1e1e24] backdrop-blur-md transition-colors\"\n                    title=\"Zoom Out\"\n                >\n                    <ZoomOut size={16} />\n                </button>\n                <button\n                    onClick={handleReset}\n                    className=\"p-2 rounded-lg bg-[#111] hover:bg-[#1e1e24] text-[#C5AE79]/60 hover:text-[#C5AE79] border border-[#1e1e24] backdrop-blur-md transition-colors\"\n                    title=\"Reset View\"\n                >\n                    <RefreshCw size={16} />\n                </button>\n            </div>\n            <div className=\"absolute bottom-4 left-4 p-4 rounded-xl bg-[#0f0f12]/90 border border-[#1e1e24] backdrop-blur-md\">\n                <div className=\"flex flex-col gap-3 text-xs text-gray-400 font-medium\">\n                    <div className=\"flex items-center gap-3\">\n                        <svg width=\"32\" height=\"6\">\n                            <line x1=\"0\" y1=\"3\" x2=\"26\" y2=\"3\" stroke=\"#64748b\" strokeWidth=\"1.5\" />\n                            <polygon points=\"26,0 32,3 26,6\" fill=\"#64748b\" />\n                        </svg>\n                        <span>Prerequisite</span>\n                    </div>\n                    <div className=\"h-px bg-gray-800 my-1\" />\n                    <div className=\"grid grid-cols-2 gap-x-4 gap-y-2\">\n                        <div className=\"flex items-center gap-2\">\n                            <div className=\"w-2.5 h-2.5 rounded-full\" style={{ background: \"#4ade80\" }} />\n                            <span className=\"text-gray-300\">Mastered</span>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                            <div className=\"w-2.5 h-2.5 rounded-full\" style={{ background: \"#a3e635\" }} />\n                            <span className=\"text-gray-300\">On Track</span>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                            <div className=\"w-2.5 h-2.5 rounded-full\" style={{ background: \"#facc15\" }} />\n                            <span className=\"text-gray-300\">Building</span>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                            <div className=\"w-2.5 h-2.5 rounded-full\" style={{ background: \"#fb923c\" }} />\n                            <span className=\"text-gray-300\">Developing</span>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                            <div className=\"w-2.5 h-2.5 rounded-full border border-gray-500 bg-gray-500/20\" />\n                            <span className=\"text-gray-400\">Not Started</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1313, "column": 0}, "map": {"version":3,"sources":["file:///Users/long/irvinehacks/IrvineHacks2026/kg-mastery/src/app/courses/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState, useCallback, useMemo } from \"react\";\nimport { useParams, useSearchParams, useRouter } from \"next/navigation\";\nimport { useNebulaStore } from \"@/store/nebulaStore\";\nimport { getAuthToken, apiFetch, getStatusFromConfidence } from \"@/lib/utils\";\nimport type { GraphNode } from \"@/lib/types\";\nimport { confidenceToColor } from \"@/lib/colors\";\nimport { getAncestors } from \"@/lib/graph\";\nimport type { GraphNode as KGNode } from \"@/components/graph/KnowledgeGraph\";\nimport KnowledgeGraph from \"@/components/graph/KnowledgeGraph\";\nimport {\n    Upload,\n    X,\n    Loader2,\n    ExternalLink,\n    Video,\n    FileText,\n    ThumbsUp,\n    ThumbsDown,\n    Eye,\n    ArrowLeft,\n} from \"lucide-react\";\n\nconst COLOR_HEX: Record<string, string> = {\n    gray: \"#94a3b8\",\n    red: \"#fb923c\",\n    yellow: \"#facc15\",\n    green: \"#4ade80\",\n};\n\nfunction getNodeColor(confidence: number): string {\n    if (confidence === 0) return COLOR_HEX.gray;\n    if (confidence < 0.4) return COLOR_HEX.red;\n    if (confidence < 0.7) return COLOR_HEX.yellow;\n    return COLOR_HEX.green;\n}\n\nexport default function CourseGraphPage() {\n    const params = useParams();\n    const searchParams = useSearchParams();\n    const router = useRouter();\n    const courseId = params.id as string;\n    const isDev = searchParams.get(\"dev\") === \"true\";\n\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const [uploading, setUploading] = useState(false);\n\n    const {\n        graphData,\n        loading,\n        selectedNode,\n        drawerOpen,\n        resources,\n        resourcesLoading,\n        poll,\n        pollLoading,\n        pollModalOpen,\n        fetchGraph,\n        selectNode,\n        closeDrawer,\n        generatePoll,\n        updateMastery,\n        updateMasteryDelta,\n        setPollModalOpen,\n        setGraphData,\n    } = useNebulaStore();\n\n    useEffect(() => {\n        if (!getAuthToken()) {\n            router.replace(\"/login\");\n            return;\n        }\n        fetchGraph(courseId);\n    }, [courseId, router, fetchGraph]);\n\n    const handleUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        if (!file) return;\n        setUploading(true);\n        try {\n            const formData = new FormData();\n            formData.append(\"file\", file);\n            const res = await apiFetch(`/api/courses/${courseId}/upload`, {\n                method: \"POST\",\n                body: formData,\n            });\n            if (res.ok) {\n                const data = await res.json();\n                setGraphData(data);\n            } else {\n                const err = await res.json().catch(() => ({ detail: \"Upload failed\" }));\n                alert(err.detail || \"Upload failed\");\n            }\n        } catch {\n            alert(\"Upload failed\");\n        } finally {\n            setUploading(false);\n            if (fileInputRef.current) fileInputRef.current.value = \"\";\n        }\n    };\n\n    const handleNodeClick = useCallback(\n        (node: KGNode) => {\n            const full = graphData?.nodes.find((n) => n.id === node.id);\n            if (full) selectNode(full as GraphNode);\n        },\n        [selectNode, graphData?.nodes]\n    );\n\n    const MAX_DISPLAY_NODES = 10;\n    const displayGraph = useMemo(() => {\n        if (!graphData || graphData.nodes.length === 0) return null;\n        if (graphData.nodes.length <= MAX_DISPLAY_NODES) return graphData;\n        const linkCount = new Map<string, number>();\n        graphData.nodes.forEach((n) => linkCount.set(n.id, 0));\n        graphData.links.forEach((link) => {\n            const s = typeof link.source === \"string\" ? link.source : (link.source as GraphNode).id;\n            const t = typeof link.target === \"string\" ? link.target : (link.target as GraphNode).id;\n            linkCount.set(s, (linkCount.get(s) ?? 0) + 1);\n            linkCount.set(t, (linkCount.get(t) ?? 0) + 1);\n        });\n        const sorted = [...graphData.nodes].sort(\n            (a, b) => (linkCount.get(b.id) ?? 0) - (linkCount.get(a.id) ?? 0)\n        );\n        const kept = new Set(sorted.slice(0, MAX_DISPLAY_NODES).map((n) => n.id));\n        const nodes = graphData.nodes.filter((n) => kept.has(n.id));\n        const links = graphData.links.filter((link) => {\n            const s = typeof link.source === \"string\" ? link.source : (link.source as GraphNode).id;\n            const t = typeof link.target === \"string\" ? link.target : (link.target as GraphNode).id;\n            return kept.has(s) && kept.has(t);\n        });\n        return { ...graphData, nodes, links };\n    }, [graphData]);\n\n    const kgNodes: KGNode[] = useMemo(() => {\n        if (!displayGraph) return [];\n        return displayGraph.nodes.map((n) => ({\n            id: n.id,\n            label: n.label,\n            color: confidenceToColor(n.confidence),\n            confidence: n.confidence,\n            description: n.description,\n            category: n.concept_type,\n        }));\n    }, [displayGraph]);\n\n    const kgEdges = useMemo(() => {\n        if (!displayGraph) return [];\n        return displayGraph.links.map((link) => ({\n            source: typeof link.source === \"string\" ? link.source : (link.source as GraphNode).id,\n            target: typeof link.target === \"string\" ? link.target : (link.target as GraphNode).id,\n        }));\n    }, [displayGraph]);\n\n    const highlightedNodeIds = useMemo(() => {\n        if (!selectedNode) return undefined;\n        const set = new Set(getAncestors(selectedNode.id, kgEdges));\n        set.add(selectedNode.id);\n        return set;\n    }, [selectedNode?.id, kgEdges]);\n\n    const status = selectedNode ? getStatusFromConfidence(selectedNode.confidence) : null;\n    const hasGraph = displayGraph && displayGraph.nodes.length > 0;\n\n    return (\n        <div className=\"h-screen w-screen flex flex-col bg-[#0a0a0a] overflow-hidden\">\n            <header className=\"flex items-center gap-4 px-4 py-2.5 border-b border-[#C5AE79]/15 bg-[#0a0a0a]/90 backdrop-blur-md z-50 shrink-0\">\n                <button\n                    onClick={() => router.push(\"/courses\")}\n                    className=\"text-[#C5AE79]/50 hover:text-[#C5AE79] transition-colors\"\n                >\n                    <ArrowLeft className=\"w-4 h-4\" />\n                </button>\n                <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs font-bold tracking-wider text-[#C5AE79]/80\">NEBULA</span>\n                    <span className=\"text-[#C5AE79]/20\">|</span>\n                    <span className=\"text-sm font-semibold text-[#C5AE79] truncate max-w-[300px]\">\n                        {graphData?.course?.name || \"Loading...\"}\n                    </span>\n                </div>\n                <div className=\"ml-auto flex items-center gap-2\">\n                    <input\n                        type=\"file\"\n                        accept=\"application/pdf\"\n                        className=\"hidden\"\n                        ref={fileInputRef}\n                        onChange={handleUpload}\n                    />\n                    <button\n                        onClick={() => fileInputRef.current?.click()}\n                        disabled={uploading}\n                        className=\"flex items-center gap-1.5 h-8 px-3 text-xs font-medium bg-[#C5AE79]/10 border border-[#C5AE79]/30 text-[#C5AE79] rounded-lg hover:bg-[#C5AE79]/20 transition-all disabled:opacity-50\"\n                    >\n                        {uploading ? (\n                            <Loader2 className=\"w-3.5 h-3.5 animate-spin\" />\n                        ) : (\n                            <Upload className=\"w-3.5 h-3.5\" />\n                        )}\n                        {uploading ? \"Analyzing...\" : \"Upload PDF\"}\n                    </button>\n                </div>\n            </header>\n\n            <div className=\"flex-1 relative min-h-0\">\n                {loading ? (\n                    <div className=\"h-full flex items-center justify-center bg-[#0a0a0a]\">\n                        <Loader2 className=\"w-6 h-6 animate-spin text-[#C5AE79]\" />\n                    </div>\n                ) : !hasGraph ? (\n                    <div className=\"h-full flex flex-col items-center justify-center text-center p-6 bg-[#0a0a0a]\">\n                        <div className=\"w-16 h-16 rounded-2xl bg-[#C5AE79]/10 flex items-center justify-center mb-4\">\n                            <Upload className=\"w-8 h-8 text-[#C5AE79]/50\" />\n                        </div>\n                        <h2 className=\"text-lg font-semibold text-[#C5AE79] mb-1\">\n                            Upload Course Material\n                        </h2>\n                        <p className=\"text-xs text-[#C5AE79]/50 max-w-sm mb-4\">\n                            Upload a PDF (syllabus, slides, or textbook) to generate your knowledge\n                            graph.\n                        </p>\n                        <button\n                            onClick={() => fileInputRef.current?.click()}\n                            disabled={uploading}\n                            className=\"h-10 px-5 bg-[#C5AE79] text-[#0a0a0a] font-semibold text-sm rounded-lg shadow-[0_0_20px_rgba(197,174,121,0.3)] disabled:opacity-50\"\n                        >\n                            {uploading ? \"Analyzing...\" : \"Select PDF\"}\n                        </button>\n                    </div>\n                ) : (\n                    <KnowledgeGraph\n                        nodes={kgNodes}\n                        edges={kgEdges}\n                        activeConceptId={selectedNode?.id ?? null}\n                        highlightedNodeIds={highlightedNodeIds}\n                        onNodeClick={handleNodeClick}\n                    />\n                )}\n\n                {drawerOpen && selectedNode && (\n                    <div className=\"absolute top-0 right-0 h-full w-80 bg-[#111]/95 border-l border-[#C5AE79]/15 backdrop-blur-xl z-40 flex flex-col shadow-[-10px_0_40px_rgba(0,0,0,0.5)]\">\n                        <div className=\"flex items-start justify-between p-4 border-b border-[#C5AE79]/15\">\n                            <div className=\"flex-1 min-w-0\">\n                                <div className=\"flex items-center gap-2 mb-1\">\n                                    <span className=\"text-base\">{status?.emoji}</span>\n                                    <span\n                                        className=\"text-[10px] font-semibold uppercase tracking-wider\"\n                                        style={{ color: getNodeColor(selectedNode.confidence) }}\n                                    >\n                                        {status?.label}\n                                    </span>\n                                </div>\n                                <h3 className=\"text-sm font-bold text-[#C5AE79] truncate\">\n                                    {selectedNode.label}\n                                </h3>\n                                <span className=\"text-[10px] text-[#C5AE79]/40 capitalize\">\n                                    {selectedNode.concept_type}\n                                </span>\n                            </div>\n                            <button\n                                onClick={closeDrawer}\n                                className=\"p-1 text-[#C5AE79]/40 hover:text-[#C5AE79] transition-colors\"\n                            >\n                                <X className=\"w-4 h-4\" />\n                            </button>\n                        </div>\n                        <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                            <p className=\"text-xs text-[#C5AE79]/70 leading-relaxed\">\n                                {selectedNode.description}\n                            </p>\n                            <div>\n                                <div className=\"flex items-center justify-between text-[10px] mb-1\">\n                                    <span className=\"text-[#C5AE79]/50 font-medium\">Confidence</span>\n                                    <span className=\"font-bold text-[#C5AE79]\">\n                                        {Math.round(selectedNode.confidence * 100)}%\n                                    </span>\n                                </div>\n                                <div className=\"h-1.5 bg-[#0a0a0a] rounded-full border border-[#C5AE79]/10 overflow-hidden\">\n                                    <div\n                                        className=\"h-full rounded-full transition-all duration-500\"\n                                        style={{\n                                            width: `${selectedNode.confidence * 100}%`,\n                                            backgroundColor: getNodeColor(selectedNode.confidence),\n                                            boxShadow: `0 0 8px ${getNodeColor(selectedNode.confidence)}`,\n                                        }}\n                                    />\n                                </div>\n                            </div>\n                            <div>\n                                <h4 className=\"text-[10px] font-semibold text-[#C5AE79] uppercase tracking-wider mb-2\">\n                                    Recommended Resources\n                                </h4>\n                                {resourcesLoading ? (\n                                    <div className=\"flex items-center gap-2 text-[#C5AE79]/40 text-xs py-3\">\n                                        <Loader2 className=\"w-3 h-3 animate-spin\" />\n                                        Loading resources...\n                                    </div>\n                                ) : (\n                                    <div className=\"space-y-1.5\">\n                                        {resources.map((r, i) => (\n                                            <a\n                                                key={i}\n                                                href={r.url}\n                                                target=\"_blank\"\n                                                rel=\"noopener noreferrer\"\n                                                className=\"flex items-start gap-2 p-2.5 rounded-lg bg-[#0a0a0a] border border-[#C5AE79]/10 hover:border-[#00ffff]/30 hover:bg-[#00ffff]/5 transition-all group\"\n                                            >\n                                                {r.type === \"video\" ? (\n                                                    <Video className=\"w-3.5 h-3.5 text-[#C5AE79]/50 mt-0.5 shrink-0 group-hover:text-[#00ffff]\" />\n                                                ) : (\n                                                    <FileText className=\"w-3.5 h-3.5 text-[#C5AE79]/50 mt-0.5 shrink-0 group-hover:text-[#00ffff]\" />\n                                                )}\n                                                <div className=\"flex-1 min-w-0\">\n                                                    <p className=\"text-xs font-medium text-[#C5AE79]/80 group-hover:text-[#C5AE79] truncate\">\n                                                        {r.title}\n                                                    </p>\n                                                    <p className=\"text-[10px] text-[#C5AE79]/40 mt-0.5 line-clamp-2\">\n                                                        {r.why}\n                                                    </p>\n                                                </div>\n                                                <ExternalLink className=\"w-3 h-3 text-[#C5AE79]/20 shrink-0 group-hover:text-[#00ffff]\" />\n                                            </a>\n                                        ))}\n                                    </div>\n                                )}\n                            </div>\n                            <button\n                                onClick={() => generatePoll(selectedNode.id)}\n                                disabled={pollLoading}\n                                className=\"w-full h-9 bg-[#C5AE79]/15 border border-[#C5AE79]/30 text-[#C5AE79] text-xs font-semibold rounded-lg hover:bg-[#C5AE79]/25 transition-all disabled:opacity-50\"\n                            >\n                                {pollLoading ? \"Generating...\" : \"ðŸŽ¯ Take Quick Poll\"}\n                            </button>\n                            {isDev && (\n                                <div className=\"pt-3 border-t border-[#C5AE79]/10 space-y-1.5\">\n                                    <p className=\"text-[9px] text-[#C5AE79]/30 uppercase tracking-widest font-mono mb-2\">\n                                        Dev Controls\n                                    </p>\n                                    <button\n                                        onClick={() => updateMastery(selectedNode.id, \"correct\")}\n                                        className=\"w-full h-7 flex items-center justify-center gap-1.5 text-[10px] font-medium border border-[#00ffff]/30 text-[#00ffff] rounded-md hover:bg-[#00ffff]/10 transition-all\"\n                                    >\n                                        <ThumbsUp className=\"w-3 h-3\" /> Simulate Correct\n                                    </button>\n                                    <button\n                                        onClick={() => updateMastery(selectedNode.id, \"wrong\")}\n                                        className=\"w-full h-7 flex items-center justify-center gap-1.5 text-[10px] font-medium border border-[#ff0055]/30 text-[#ff0055] rounded-md hover:bg-[#ff0055]/10 transition-all\"\n                                    >\n                                        <ThumbsDown className=\"w-3 h-3\" /> Simulate Wrong\n                                    </button>\n                                    <button\n                                        onClick={() => updateMasteryDelta(selectedNode.id, 0.3)}\n                                        className=\"w-full h-7 flex items-center justify-center gap-1.5 text-[10px] font-medium border border-[#C5AE79]/30 text-[#C5AE79] rounded-md hover:bg-[#C5AE79]/10 transition-all\"\n                                    >\n                                        <Eye className=\"w-3 h-3\" /> Simulate Exposure (+30%)\n                                    </button>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                )}\n\n                {pollModalOpen && (\n                    <PollModal\n                        poll={poll}\n                        loading={pollLoading}\n                        nodeId={selectedNode?.id || \"\"}\n                        onClose={() => setPollModalOpen(false)}\n                        onResult={(evalResult) => {\n                            if (selectedNode) updateMastery(selectedNode.id, evalResult);\n                            setPollModalOpen(false);\n                        }}\n                    />\n                )}\n            </div>\n        </div>\n    );\n}\n\nfunction PollModal({\n    poll,\n    loading,\n    onClose,\n    onResult,\n}: {\n    poll: any;\n    loading: boolean;\n    nodeId: string;\n    onClose: () => void;\n    onResult: (evalResult: string) => void;\n}) {\n    const [selected, setSelected] = useState<string | null>(null);\n    const [showResult, setShowResult] = useState(false);\n\n    const handleSubmit = () => {\n        if (!selected || !poll) return;\n        const isCorrect = selected === poll.correct_answer;\n        setShowResult(true);\n        setTimeout(() => onResult(isCorrect ? \"correct\" : \"wrong\"), 1500);\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-[#111] border border-[#C5AE79]/20 rounded-2xl w-full max-w-md p-6 shadow-[0_0_60px_rgba(0,0,0,0.8)]\">\n                {loading || !poll ? (\n                    <div className=\"flex items-center justify-center py-12\">\n                        <Loader2 className=\"w-6 h-6 animate-spin text-[#C5AE79]\" />\n                        <span className=\"ml-3 text-sm text-[#C5AE79]/60\">Generating question...</span>\n                    </div>\n                ) : (\n                    <>\n                        <div className=\"flex items-start justify-between mb-4\">\n                            <h3 className=\"text-sm font-bold text-[#C5AE79] leading-snug pr-4\">\n                                {poll.question}\n                            </h3>\n                            <button\n                                onClick={onClose}\n                                className=\"p-1 text-[#C5AE79]/40 hover:text-[#C5AE79] shrink-0\"\n                            >\n                                <X className=\"w-4 h-4\" />\n                            </button>\n                        </div>\n                        <div className=\"space-y-2 mb-5\">\n                            {poll.options?.map((opt: string, i: number) => {\n                                const letter = opt[0];\n                                const isThis = selected === letter;\n                                const isCorrectAnswer = showResult && letter === poll.correct_answer;\n                                const isWrongSelected =\n                                    showResult && isThis && letter !== poll.correct_answer;\n                                return (\n                                    <button\n                                        key={i}\n                                        onClick={() => !showResult && setSelected(letter)}\n                                        disabled={showResult}\n                                        className={`w-full text-left p-3 rounded-lg text-xs border transition-all ${\n                                            isCorrectAnswer\n                                                ? \"border-[#00ffff]/50 bg-[#00ffff]/10 text-[#00ffff]\"\n                                                : isWrongSelected\n                                                  ? \"border-[#ff0055]/50 bg-[#ff0055]/10 text-[#ff0055]\"\n                                                  : isThis\n                                                    ? \"border-[#C5AE79]/50 bg-[#C5AE79]/10 text-[#C5AE79]\"\n                                                    : \"border-[#C5AE79]/15 text-[#C5AE79]/70 hover:border-[#C5AE79]/30\"\n                                        }`}\n                                    >\n                                        {opt}\n                                    </button>\n                                );\n                            })}\n                        </div>\n                        {!showResult && (\n                            <button\n                                onClick={handleSubmit}\n                                disabled={!selected}\n                                className=\"w-full h-9 bg-[#C5AE79] text-[#0a0a0a] text-xs font-bold rounded-lg disabled:opacity-30 transition-all\"\n                            >\n                                Submit Answer\n                            </button>\n                        )}\n                        {showResult && (\n                            <div\n                                className={`text-center text-sm font-semibold py-2 ${\n                                    selected === poll.correct_answer\n                                        ? \"text-[#00ffff]\"\n                                        : \"text-[#ff0055]\"\n                                }`}\n                            >\n                                {selected === poll.correct_answer\n                                    ? \"âœ… Correct! Mastery updated.\"\n                                    : `âŒ Wrong. Correct answer: ${poll.correct_answer}`}\n                            </div>\n                        )}\n                    </>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}