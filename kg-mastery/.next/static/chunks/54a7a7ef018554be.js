(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},75157,e=>{"use strict";let t=e.i(47167).default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000";function a(e){return 0===e?{label:"Unseen",emoji:"âš«",color:"grey"}:e<.4?{label:"Struggling",emoji:"ðŸ”´",color:"red"}:e<.7?{label:"Exposed",emoji:"ðŸŸ¡",color:"gold"}:{label:"Mastered",emoji:"ðŸŸ¢",color:"cyan"}}function l(){return localStorage.getItem("nebula_token")}function r(e){localStorage.setItem("nebula_token",e)}function s(){localStorage.removeItem("nebula_token")}async function n(e,a={}){let r=l(),o={...a.headers||{}};r&&(o.Authorization=`Bearer ${r}`),a.body instanceof FormData||(o["Content-Type"]="application/json");let i=await fetch(`${t}${e}`,{...a,headers:o});if(401===i.status)throw s(),window.location.href="/login",Error("Unauthorized");return i}e.s(["API_BASE",0,t,"apiFetch",()=>n,"clearAuthToken",()=>s,"getAuthToken",()=>l,"getStatusFromConfidence",()=>a,"setAuthToken",()=>r],75157)},75254,e=>{"use strict";var t=e.i(71645);let a=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,t.forwardRef)(({color:e="currentColor",size:l=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:o="",children:i,iconNode:d,...c},f)=>(0,t.createElement)("svg",{ref:f,...r,width:l,height:l,stroke:e,strokeWidth:n?24*Number(s)/Number(l):s,className:a("lucide",o),...!i&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(i)?i:[i]])),n=(e,r)=>{let n=(0,t.forwardRef)(({className:n,...o},i)=>(0,t.createElement)(s,{ref:i,iconNode:r,className:a(`lucide-${l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...o}));return n.displayName=l(e),n};e.s(["default",()=>n],75254)},67585,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let l=e.r(32061);function r({reason:e,children:t}){if("u"<typeof window)throw Object.defineProperty(new l.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,a)=>{"use strict";function l(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"encodeURIPath",{enumerable:!0,get:function(){return l}})},52157,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"PreloadChunks",{enumerable:!0,get:function(){return i}});let l=e.r(43476),r=e.r(74080),s=e.r(63599),n=e.r(9885),o=e.r(43369);function i({moduleIds:e}){if("u">typeof window)return null;let t=s.workAsyncStorage.getStore();if(void 0===t)return null;let a=[];if(t.reactLoadableManifest&&e){let l=t.reactLoadableManifest;for(let t of e){if(!l[t])continue;let e=l[t].files;a.push(...e)}}if(0===a.length)return null;let i=(0,o.getDeploymentIdQueryOrEmptyString)();return(0,l.jsx)(l.Fragment,{children:a.map(e=>{let a=`${t.assetPrefix}/_next/${(0,n.encodeURIPath)(e)}${i}`;return e.endsWith(".css")?(0,l.jsx)("link",{precedence:"dynamic",href:a,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,r.preload)(a,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return d}});let l=e.r(43476),r=e.r(71645),s=e.r(67585),n=e.r(52157);function o(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},a=(0,r.lazy)(()=>t.loader().then(o)),d=t.loading;function c(e){let o=d?(0,l.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,c=i?r.Suspense:r.Fragment,f=t.ssr?(0,l.jsxs)(l.Fragment,{children:["u"<typeof window?(0,l.jsx)(n.PreloadChunks,{moduleIds:t.modules}):null,(0,l.jsx)(a,{...e})]}):(0,l.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,l.jsx)(a,{...e})});return(0,l.jsx)(c,{...i?{fallback:o}:{},children:f})}return c.displayName="LoadableComponent",c}},70703,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r}});let l=e.r(55682)._(e.r(69093));function r(e,t){let a={};"function"==typeof e&&(a.loader=e);let r={...a,...t};return(0,l.default)({...r,modules:r.loadableGenerated?.modules})}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},99473,e=>{"use strict";let t;var a=e.i(43476),l=e.i(71645),r=e.i(18566),s=e.i(70703);let n=e=>{let t,a=new Set,l=(e,l)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=l?l:"object"!=typeof r||null===r)?r:Object.assign({},t,r),a.forEach(a=>a(t,e))}},r=()=>t,s={setState:l,getState:r,getInitialState:()=>n,subscribe:e=>(a.add(e),()=>a.delete(e))},n=t=e(l,r,s);return s},o=e=>{let t=e?n(e):n,a=e=>(function(e,t=e=>e){let a=l.default.useSyncExternalStore(e.subscribe,l.default.useCallback(()=>t(e.getState()),[e,t]),l.default.useCallback(()=>t(e.getInitialState()),[e,t]));return l.default.useDebugValue(a),a})(t,e);return Object.assign(a,t),a};var i=e.i(75157);let d=(t=(e,t)=>({graphData:null,loading:!1,selectedNode:null,drawerOpen:!1,resources:[],resourcesLoading:!1,poll:null,pollLoading:!1,pollModalOpen:!1,fetchGraph:async t=>{e({loading:!0});try{let a=await (0,i.apiFetch)(`/api/courses/${t}/graph`);if(a.ok){let t=await a.json();e({graphData:t,loading:!1})}else e({loading:!1})}catch{e({loading:!1})}},selectNode:a=>{e({selectedNode:a,drawerOpen:!!a,resources:[],poll:null}),a&&t().fetchResources(a.id)},closeDrawer:()=>e({drawerOpen:!1,selectedNode:null}),fetchResources:async t=>{e({resourcesLoading:!0});try{let a=await (0,i.apiFetch)(`/api/concepts/${t}/resources`);if(a.ok){let t=await a.json();e({resources:t,resourcesLoading:!1})}else e({resourcesLoading:!1})}catch{e({resourcesLoading:!1})}},generatePoll:async t=>{e({pollLoading:!0,pollModalOpen:!0});try{let a=await (0,i.apiFetch)(`/api/concepts/${t}/poll`,{method:"POST"});if(a.ok){let t=await a.json();e({poll:t,pollLoading:!1})}else e({pollLoading:!1})}catch{e({pollLoading:!1})}},updateMastery:async(t,a)=>{try{let l=await (0,i.apiFetch)(`/api/mastery/${t}`,{method:"PUT",body:JSON.stringify({eval_result:a})});if(l.ok){let a=await l.json();e(e=>{if(!e.graphData)return{};let l=e.graphData.nodes.map(e=>e.id===t?{...e,confidence:a.confidence}:e),r=l.find(e=>e.id===t)||null;return{graphData:{...e.graphData,nodes:l},selectedNode:e.selectedNode?.id===t?r:e.selectedNode}})}}catch{}},updateMasteryDelta:async(t,a)=>{try{let l=await (0,i.apiFetch)(`/api/mastery/${t}`,{method:"PUT",body:JSON.stringify({delta:a})});if(l.ok){let a=await l.json();e(e=>{if(!e.graphData)return{};let l=e.graphData.nodes.map(e=>e.id===t?{...e,confidence:a.confidence}:e),r=l.find(e=>e.id===t)||null;return{graphData:{...e.graphData,nodes:l},selectedNode:e.selectedNode?.id===t?r:e.selectedNode}})}}catch{}},setPollModalOpen:t=>e({pollModalOpen:t}),setGraphData:t=>e({graphData:t})}))?o(t):o;var c=e.i(75254);let f=(0,c.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),u=(0,c.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),h=(0,c.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),x=(0,c.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),p=(0,c.default)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),m=(0,c.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),b=(0,c.default)("thumbs-up",[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]]),g=(0,c.default)("thumbs-down",[["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}],["path",{d:"M17 14V2",key:"8ymqnk"}]]),j=(0,c.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),y=(0,c.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),w=(0,s.default)(()=>e.A(26187),{loadableGenerated:{modules:[64660]},ssr:!1});function C(e){return 0===e?"rgba(255,255,255,0.25)":e<.4?"#ff0055":e<.7?"#C5AE79":"#00ffff"}function k(e,t){return Math.max(0===t?21:28,(6.5*e.split(/[\s\-\/]+/).reduce((e,t)=>e.length>t.length?e:t,"").length+14)/2)}function N(){let e=(0,r.useParams)(),t=(0,r.useSearchParams)(),s=(0,r.useRouter)(),n=e.id,o="true"===t.get("dev"),c=(0,l.useRef)(null),N=(0,l.useRef)(null),[A,E]=(0,l.useState)(!1),[_,P]=(0,l.useState)(0),{graphData:M,loading:S,selectedNode:O,drawerOpen:D,resources:L,resourcesLoading:T,poll:I,pollLoading:R,pollModalOpen:$,fetchGraph:U,selectNode:z,closeDrawer:F,generatePoll:B,updateMastery:W,updateMasteryDelta:H,setPollModalOpen:q,setGraphData:G}=d();(0,l.useEffect)(()=>{(0,i.getAuthToken)()?U(n):s.replace("/login")},[n,s,U]),(0,l.useEffect)(()=>{let e=setInterval(()=>{P(e=>(e+.05)%(2*Math.PI))},50);return()=>clearInterval(e)},[]);let V=async e=>{let t=e.target.files?.[0];if(t){E(!0);try{let e=new FormData;e.append("file",t);let a=await (0,i.apiFetch)(`/api/courses/${n}/upload`,{method:"POST",body:e});if(a.ok){let e=await a.json();G(e)}else{let e=await a.json().catch(()=>({detail:"Upload failed"}));alert(e.detail||"Upload failed")}}catch{alert("Upload failed")}finally{E(!1),N.current&&(N.current.value="")}}},Z=(0,l.useCallback)(e=>{z(e)},[z]),J=(0,l.useCallback)((e,t,a)=>{let l=e.confidence??0,r=C(l),s=0===l?0:l<.4?20:l<.7?14:25,n=e.label||"",o=O?.id===e.id,i=k(n,l),d=1;l>=.4&&l<.7?d=1+.06*Math.sin(_):l>0&&l<.4&&(d=1+.04*Math.sin(1.5*_));let c=i*d;s>0&&(t.save(),t.shadowColor=r,t.shadowBlur=s*(o?2.5:1),t.beginPath(),t.arc(e.x,e.y,c,0,2*Math.PI),t.fillStyle=r,t.fill(),t.restore()),t.beginPath(),t.arc(e.x,e.y,c,0,2*Math.PI),0===l?(t.strokeStyle="rgba(255,255,255,0.3)",t.lineWidth=1.5,t.stroke(),t.fillStyle="rgba(10, 10, 10, 0.8)",t.fill()):(t.fillStyle="rgba(10, 10, 10, 0.75)",t.fill(),t.strokeStyle=r,t.lineWidth=2.5,t.stroke()),o&&(t.beginPath(),t.arc(e.x,e.y,c+4,0,2*Math.PI),t.strokeStyle="#ffffff",t.lineWidth=2,t.stroke());let f=Math.max(11/a,4);t.font=`700 ${f}px Inter, system-ui, sans-serif`,t.textAlign="center",t.textBaseline="middle",t.fillStyle=0===l?"rgba(255,255,255,0.5)":o?"#ffffff":r;let u=1.7*c,h=n.split(/\s+/),x=[],p=h[0]||"";for(let e=1;e<h.length;e++){let a=p+" "+h[e];t.measureText(a).width>u?(x.push(p),p=h[e]):p=a}x.push(p);let m=1.25*f,b=e.y-(x.length-1)*m/2;for(let a=0;a<x.length;a++)t.fillText(x[a],e.x,b+a*m)},[O,_]),K=(0,l.useCallback)((e,t,a)=>{let l=k(e.label||"",e.confidence??0);a.fillStyle=t,a.beginPath(),a.arc(e.x,e.y,l,0,2*Math.PI),a.fill()},[]),Q=(0,l.useCallback)((e,t)=>{let a=e.source,l=e.target;a&&l&&"string"!=typeof a&&"string"!=typeof l&&(t.beginPath(),t.moveTo(a.x,a.y),t.lineTo(l.x,l.y),t.strokeStyle="rgba(197, 174, 121, 0.15)",t.lineWidth=.8,t.stroke())},[]),X=O?(0,i.getStatusFromConfidence)(O.confidence):null,Y=M&&M.nodes.length>0;return(0,a.jsxs)("div",{className:"h-screen w-screen flex flex-col bg-[#0a0a0a] overflow-hidden",children:[(0,a.jsxs)("header",{className:"flex items-center gap-4 px-4 py-2.5 border-b border-[#C5AE79]/15 bg-[#0a0a0a]/90 backdrop-blur-md z-50 shrink-0",children:[(0,a.jsx)("button",{onClick:()=>s.push("/courses"),className:"text-[#C5AE79]/50 hover:text-[#C5AE79] transition-colors",children:(0,a.jsx)(y,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs font-bold tracking-wider text-[#C5AE79]/80",children:"NEBULA"}),(0,a.jsx)("span",{className:"text-[#C5AE79]/20",children:"|"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-[#C5AE79] truncate max-w-[300px]",children:M?.course?.name||"Loading..."})]}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,a.jsx)("input",{type:"file",accept:"application/pdf",className:"hidden",ref:N,onChange:V}),(0,a.jsxs)("button",{onClick:()=>N.current?.click(),disabled:A,className:"flex items-center gap-1.5 h-8 px-3 text-xs font-medium bg-[#C5AE79]/10 border border-[#C5AE79]/30 text-[#C5AE79] rounded-lg hover:bg-[#C5AE79]/20 transition-all disabled:opacity-50",children:[A?(0,a.jsx)(h,{className:"w-3.5 h-3.5 animate-spin"}):(0,a.jsx)(f,{className:"w-3.5 h-3.5"}),A?"Analyzing...":"Upload PDF"]})]})]}),(0,a.jsxs)("div",{className:"flex-1 relative min-h-0",children:[S?(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsx)(h,{className:"w-6 h-6 animate-spin text-[#C5AE79]"})}):Y?(0,a.jsx)(w,{ref:c,graphData:{nodes:M.nodes,links:M.links},nodeCanvasObject:J,nodePointerAreaPaint:K,linkCanvasObject:Q,onNodeClick:Z,backgroundColor:"#0a0a0a",nodeRelSize:28,linkWidth:.8,linkColor:()=>"rgba(197, 174, 121, 0.15)",cooldownTicks:100,d3AlphaDecay:.02,d3VelocityDecay:.3,enableNodeDrag:!0,enableZoomInteraction:!0,enablePanInteraction:!0}):(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center p-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-[#C5AE79]/10 flex items-center justify-center mb-4",children:(0,a.jsx)(f,{className:"w-8 h-8 text-[#C5AE79]/50"})}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-[#C5AE79] mb-1",children:"Upload Course Material"}),(0,a.jsx)("p",{className:"text-xs text-[#C5AE79]/50 max-w-sm mb-4",children:"Upload a PDF (syllabus, slides, or textbook) to generate your knowledge graph."}),(0,a.jsx)("button",{onClick:()=>N.current?.click(),disabled:A,className:"h-10 px-5 bg-[#C5AE79] text-[#0a0a0a] font-semibold text-sm rounded-lg shadow-[0_0_20px_rgba(197,174,121,0.3)] disabled:opacity-50",children:A?"Analyzing...":"Select PDF"})]}),Y&&(0,a.jsx)("div",{className:"absolute bottom-4 left-4 p-3 rounded-xl bg-[#111]/90 border border-[#C5AE79]/15 backdrop-blur-md z-40",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2 text-[10px] text-[#C5AE79]/70 font-medium",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full border border-white/30"}),(0,a.jsx)("span",{children:"Unseen"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#ff0055] shadow-[0_0_6px_#ff0055]"}),(0,a.jsx)("span",{className:"text-[#ff0055]",children:"Struggling"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#C5AE79] shadow-[0_0_6px_#C5AE79]"}),(0,a.jsx)("span",{children:"Exposed"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#00ffff] shadow-[0_0_6px_#00ffff]"}),(0,a.jsx)("span",{className:"text-[#00ffff]",children:"Mastered"})]})]})}),D&&O&&(0,a.jsxs)("div",{className:"absolute top-0 right-0 h-full w-80 bg-[#111]/95 border-l border-[#C5AE79]/15 backdrop-blur-xl z-40 flex flex-col shadow-[-10px_0_40px_rgba(0,0,0,0.5)]",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between p-4 border-b border-[#C5AE79]/15",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"text-base",children:X?.emoji}),(0,a.jsx)("span",{className:"text-[10px] font-semibold uppercase tracking-wider",style:{color:C(O.confidence)},children:X?.label})]}),(0,a.jsx)("h3",{className:"text-sm font-bold text-[#C5AE79] truncate",children:O.label}),(0,a.jsx)("span",{className:"text-[10px] text-[#C5AE79]/40 capitalize",children:O.concept_type})]}),(0,a.jsx)("button",{onClick:F,className:"p-1 text-[#C5AE79]/40 hover:text-[#C5AE79] transition-colors",children:(0,a.jsx)(u,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,a.jsx)("p",{className:"text-xs text-[#C5AE79]/70 leading-relaxed",children:O.description}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-[10px] mb-1",children:[(0,a.jsx)("span",{className:"text-[#C5AE79]/50 font-medium",children:"Confidence"}),(0,a.jsxs)("span",{className:"font-bold text-[#C5AE79]",children:[Math.round(100*O.confidence),"%"]})]}),(0,a.jsx)("div",{className:"h-1.5 bg-[#0a0a0a] rounded-full border border-[#C5AE79]/10 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${100*O.confidence}%`,backgroundColor:C(O.confidence),boxShadow:`0 0 8px ${C(O.confidence)}`}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-[10px] font-semibold text-[#C5AE79] uppercase tracking-wider mb-2",children:"Recommended Resources"}),T?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[#C5AE79]/40 text-xs py-3",children:[(0,a.jsx)(h,{className:"w-3 h-3 animate-spin"}),"Loading resources..."]}):(0,a.jsx)("div",{className:"space-y-1.5",children:L.map((e,t)=>(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-start gap-2 p-2.5 rounded-lg bg-[#0a0a0a] border border-[#C5AE79]/10 hover:border-[#00ffff]/30 hover:bg-[#00ffff]/5 transition-all group",children:["video"===e.type?(0,a.jsx)(p,{className:"w-3.5 h-3.5 text-[#C5AE79]/50 mt-0.5 shrink-0 group-hover:text-[#00ffff]"}):(0,a.jsx)(m,{className:"w-3.5 h-3.5 text-[#C5AE79]/50 mt-0.5 shrink-0 group-hover:text-[#00ffff]"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-[#C5AE79]/80 group-hover:text-[#C5AE79] truncate",children:e.title}),(0,a.jsx)("p",{className:"text-[10px] text-[#C5AE79]/40 mt-0.5 line-clamp-2",children:e.why})]}),(0,a.jsx)(x,{className:"w-3 h-3 text-[#C5AE79]/20 shrink-0 group-hover:text-[#00ffff]"})]},t))})]}),(0,a.jsx)("button",{onClick:()=>B(O.id),disabled:R,className:"w-full h-9 bg-[#C5AE79]/15 border border-[#C5AE79]/30 text-[#C5AE79] text-xs font-semibold rounded-lg hover:bg-[#C5AE79]/25 transition-all disabled:opacity-50",children:R?"Generating...":"ðŸŽ¯ Take Quick Poll"}),o&&(0,a.jsxs)("div",{className:"pt-3 border-t border-[#C5AE79]/10 space-y-1.5",children:[(0,a.jsx)("p",{className:"text-[9px] text-[#C5AE79]/30 uppercase tracking-widest font-mono mb-2",children:"Dev Controls"}),(0,a.jsxs)("button",{onClick:()=>W(O.id,"correct"),className:"w-full h-7 flex items-center justify-center gap-1.5 text-[10px] font-medium border border-[#00ffff]/30 text-[#00ffff] rounded-md hover:bg-[#00ffff]/10 transition-all",children:[(0,a.jsx)(b,{className:"w-3 h-3"})," Simulate Correct"]}),(0,a.jsxs)("button",{onClick:()=>W(O.id,"wrong"),className:"w-full h-7 flex items-center justify-center gap-1.5 text-[10px] font-medium border border-[#ff0055]/30 text-[#ff0055] rounded-md hover:bg-[#ff0055]/10 transition-all",children:[(0,a.jsx)(g,{className:"w-3 h-3"})," Simulate Wrong"]}),(0,a.jsxs)("button",{onClick:()=>H(O.id,.3),className:"w-full h-7 flex items-center justify-center gap-1.5 text-[10px] font-medium border border-[#C5AE79]/30 text-[#C5AE79] rounded-md hover:bg-[#C5AE79]/10 transition-all",children:[(0,a.jsx)(j,{className:"w-3 h-3"})," Simulate Exposure (+30%)"]})]})]})]}),$&&(0,a.jsx)(v,{poll:I,loading:R,nodeId:O?.id||"",onClose:()=>q(!1),onResult:e=>{O&&W(O.id,e),q(!1)}})]})]})}function v({poll:e,loading:t,nodeId:r,onClose:s,onResult:n}){let[o,i]=(0,l.useState)(null),[d,c]=(0,l.useState)(!1);return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-[#111] border border-[#C5AE79]/20 rounded-2xl w-full max-w-md p-6 shadow-[0_0_60px_rgba(0,0,0,0.8)]",children:t||!e?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(h,{className:"w-6 h-6 animate-spin text-[#C5AE79]"}),(0,a.jsx)("span",{className:"ml-3 text-sm text-[#C5AE79]/60",children:"Generating question..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-[#C5AE79] leading-snug pr-4",children:e.question}),(0,a.jsx)("button",{onClick:s,className:"p-1 text-[#C5AE79]/40 hover:text-[#C5AE79] transition-colors shrink-0",children:(0,a.jsx)(u,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"space-y-2 mb-5",children:e.options?.map((t,l)=>{let r=t[0],s=o===r,n=d&&r===e.correct_answer,c=d&&s&&r!==e.correct_answer;return(0,a.jsx)("button",{onClick:()=>!d&&i(r),disabled:d,className:`w-full text-left p-3 rounded-lg text-xs border transition-all ${n?"border-[#00ffff]/50 bg-[#00ffff]/10 text-[#00ffff]":c?"border-[#ff0055]/50 bg-[#ff0055]/10 text-[#ff0055]":s?"border-[#C5AE79]/50 bg-[#C5AE79]/10 text-[#C5AE79]":"border-[#C5AE79]/15 text-[#C5AE79]/70 hover:border-[#C5AE79]/30"}`,children:t},l)})}),!d&&(0,a.jsx)("button",{onClick:()=>{if(!o||!e)return;let t=o===e.correct_answer;c(!0),setTimeout(()=>{n(t?"correct":"wrong")},1500)},disabled:!o,className:"w-full h-9 bg-[#C5AE79] text-[#0a0a0a] text-xs font-bold rounded-lg disabled:opacity-30 transition-all",children:"Submit Answer"}),d&&(0,a.jsx)("div",{className:`text-center text-sm font-semibold py-2 ${o===e.correct_answer?"text-[#00ffff]":"text-[#ff0055]"}`,children:o===e.correct_answer?"âœ… Correct! Mastery updated.":`âŒ Wrong. Correct answer: ${e.correct_answer}`})]})})})}e.s(["default",()=>N],99473)},26187,e=>{e.v(t=>Promise.all(["static/chunks/ed671b89421ce4b1.js"].map(t=>e.l(t))).then(()=>t(64660)))}]);